var cfg_record_osd_header=new Array(str_ch,str_OSDposition,str_OSDposition,str_timestamp,str_stamp_position);var g_camNameOsd=null;var g_timeStamp=null;var g_bTimeStampPosSet=false;var g_curSetChannel=-1;function OsdInfo(a,c,b){this.bEnable=a;this.xPos=c;this.yPos=b}function LoadDefaultCfgRecOSD(){if(GetDefaultCfg(osd_config_array)){var d=document.getElementById("rec_osd_all_cfg");var b=document.getElementById("id_record_osd_cfg");var a=document.getElementById("id_rec_osd_all");var c=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateOsdInfo(c,true);cfgCopy2All(d,b,a);g_bChange=true;Align()}}function OnLoadCfgRecOSD(){ApplyXmlLang("cfg_rec_osd.xml");var d=document.getElementById("id_record_osd_cfg");CreateListRecOSD(d,5,cfg_record_osd_header,g_ch_num);var c=CreateConfigReqXml(osd_config_array);var a=WebClient.ExcuteCmd(c);if(a==""){return}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(a);g_xmlDoc.async=false;var f=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateOsdInfo(f,true);var e=document.getElementById("rec_osd_all_cfg");var d=document.getElementById("id_record_osd_cfg");var b=document.getElementById("id_rec_osd_all");cfgCopy2All(e,d,b);Align()}function CreateListRecOSD(g,a,b,j){var d=/msie/i.test(navigator.userAgent);var h=g.outerHTML.toLowerCase();var c=h.indexOf("</tbody>");h=h.substr(0,c);h+="<tr class = 'table_head_bgcolor'>";for(var e=0;e<a;e++){h+='<td style = "text-align:center">'+b[e]+"</td>"}h+="</tr>";for(var e=1;e<j+1;e++){if(d){h+="<tr>";h+='<td style = "width:50px;text-align:center">'+e+"</td>";h+='<td><input type = "checkbox" name = "name_osd" style = "width:100px;" onchange = "g_bChange = true;" /></td>';h+='<td align = "center" style = "width:222px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+str_setting+' onclick = "BeginPositionSet(false, '+(e-1)+')"/></td>';h+='<td><input type = "checkbox" name = "time_stamp" style = "width:100px;" onchange = "g_bChange = true;"/></td>';h+='<td align = "center" style = "width:222px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+str_setting+' onclick = "BeginPositionSet(true, '+(e-1)+')"/></td>';h+="</tr>"}else{h+="<tr>";h+='<td style = "width:50px;text-align:center">'+e+"</td>";h+='<td style = "width:100px;text-align:center"><input type = "checkbox" name = "name_osd" style = "width:30px;" onchange = "g_bChange = true;" /></td>';h+='<td align = "center" style = "width:222px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+str_setting+' onclick = "BeginPositionSet(false, '+(e-1)+')"/></td>';h+='<td style = "width:100px;text-align:center"><input type = "checkbox" name = "time_stamp" style = "width:30px;" onchange = "g_bChange = true;"/></td>';h+='<td align = "center" style = "width:222px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+str_setting+' onclick = "BeginPositionSet(true, '+(e-1)+')"/></td>';h+="</tr>"}}h+="</tbody></table>";if(d){var f=g.parentElement}else{var f=g.parentNode}f.innerHTML=h;g=f.childNodes[0]}function UpdateOsdInfo(h,d){var g=document.getElementsByName("time_stamp");var f=document.getElementsByName("name_osd");var o=document.getElementById("rec_osd_all_cfg");var n=document.getElementsByName("all_time_stamp");var l=document.getElementsByName("all_name_osd");var b=document.getElementById("osd_position_set_pane");if(b.style.display==""){EndPositionSet(true)}for(var e=0;e<h.length;e++){if(h[e].getAttribute("name")==STR_TIME_STAMP_INFO){if(d){g_timeStamp=new Array();for(var c=e;c<(e+g_ch_num);c++){var j=h[c].childNodes[0].nodeValue.split("+");g_timeStamp[c-e]=new OsdInfo(j[2],j[0],j[1]);g[c-e].checked=((j[2]!="0")?true:false)}}else{for(var c=e;c<(e+g_ch_num);c++){if(o.checked){for(var m=0;m<(g_ch_num);m++){if(n[0].checked){g_timeStamp[m].bEnable="1"}else{g_timeStamp[m].bEnable="0"}}}else{g_timeStamp[c-e].bEnable=(g[c-e].checked?"1":"0")}var j=new Array(g_timeStamp[c-e].xPos,g_timeStamp[c-e].yPos,g_timeStamp[c-e].bEnable);h[c].childNodes[0].nodeValue=j.join("+")}}e+=g_ch_num-1}else{if(h[e].getAttribute("name")==STR_CAM_NAME_STAMP){if(d){g_camNameOsd=new Array();for(var c=e;c<(e+g_ch_num);c++){var j=h[c].childNodes[0].nodeValue.split("+");g_camNameOsd[c-e]=new OsdInfo(j[2],j[0],j[1]);f[c-e].checked=((j[2]!="0")?true:false)}}else{for(var c=e;c<(e+g_ch_num);c++){if(o.checked){for(var m=0;m<(g_ch_num);m++){if(l[0].checked){g_camNameOsd[m].bEnable="1"}else{g_camNameOsd[m].bEnable="0"}}}else{g_camNameOsd[c-e].bEnable=(f[c-e].checked?"1":"0")}var j=new Array(g_camNameOsd[c-e].xPos,g_camNameOsd[c-e].yPos,g_camNameOsd[c-e].bEnable);h[c].childNodes[0].nodeValue=j.join("+")}}e+=g_ch_num-1}else{if(h[e].getAttribute("name")==STR_SPOT_SPLIT_MODE){}else{if(h[e].getAttribute("name")==STR_SPOT_DWELL_TIME){}}}}}}function BeginPositionSet(f,e){var g=/msie/i.test(navigator.userAgent);var h=document.getElementById("osd_position_set_label");var d=document.getElementById("osd_x_pos");var b=document.getElementById("osd_y_pos");var i=document.getElementById("osd_channel");var a=document.getElementById("div_config_index");var c=document.getElementById("osd_position_set_pane");g_bTimeStampPosSet=f;c.style.display="";g_curSetChannel=e;d.value=0;b.value=0;if(g_bTimeStampPosSet){h.innerHTML=timePosition_set_head;if(g_curSetChannel!=-1){d.value=g_timeStamp[g_curSetChannel].xPos;b.value=g_timeStamp[g_curSetChannel].yPos}}else{h.innerHTML=osdPosition_set_head;if(g_curSetChannel!=-1){d.value=g_camNameOsd[g_curSetChannel].xPos;b.value=g_camNameOsd[g_curSetChannel].yPos}}if(g_curSetChannel!=-1){if(g){i.innerText=channel_string+" "+(g_curSetChannel+1)}else{i.textContent=channel_string+" "+(g_curSetChannel+1)}}else{if(g){i.innerText=all_string+" "+channel_string}else{i.textContent=all_string+" "+channel_string}}Align();EdgeCtrl(a,72);location.href="#record_osd_all_label"}function EndPositionSet(d){var f=document.getElementById("osd_position_set_pane");var c=document.getElementById("div_config_index");var e=document.getElementById("osd_x_pos");var b=document.getElementById("osd_y_pos");f.style.display="none";Align();EdgeCtrl(c,72);if(!d){return}g_bChange=true;if(g_bTimeStampPosSet){if(g_curSetChannel==-1){for(var a=0;a<g_ch_num;a++){g_timeStamp[a].xPos=parseInt(e.value,10);g_timeStamp[a].yPos=parseInt(b.value,10)}}else{g_timeStamp[g_curSetChannel].xPos=parseInt(e.value,10);g_timeStamp[g_curSetChannel].yPos=parseInt(b.value,10)}}else{if(g_curSetChannel==-1){for(var a=0;a<g_ch_num;a++){g_camNameOsd[a].xPos=parseInt(e.value,10);g_camNameOsd[a].yPos=parseInt(b.value,10)}}else{g_camNameOsd[g_curSetChannel].xPos=parseInt(e.value,10);g_camNameOsd[g_curSetChannel].yPos=parseInt(b.value,10)}}};
var g_curTextCfgChannel=0;function OnLoadCfgLive(){var b=/msie/i.test(navigator.userAgent);var d=new Array(str_ch,str_showname,str_name);if(g_supportFunctions.IsSupportLiveMultiText()){d.splice(3,0,"Text")}var g=document.getElementById("id_live_cfg");var e=document.getElementById("live_all_cfg");var m=document.getElementById("id_live_all");var a=document.getElementById("dwell_time");ApplyXmlLang("cfg_live.xml");CreateListLive(g,d.length,d,g_ch_num);GenSelectListEx(a,g_dwellList);var n=CreateConfigReqXml(channel_config_array);var h=WebClient.ExcuteCmd(n);if(h==""){return}g_xmlDoc.async=false;g_xmlDoc=FormatToXmlDOM(h);var j=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateValues(j,true);cfgCopy2All(e,g,m);if(g_supportFunctions.IsSupportLiveMultiText()){g_liveTextConfig=[];var l=-1;var c=0;var o=0;for(var f=0;f<j.length;f++){if(j[f].getAttribute("name")==STR_LIVE_TEXT){var k=j[f].getAttribute("index");if(parseInt(k,10)%6==0){c=0;l++}else{c++}if(j[f]){if(b){o=j[f].nodeTypedValue}else{o=j[f].textContent}}else{o=""}g_liveTextConfig.push(new LiveTextConfig(l,c,o))}}}Align()}function LoadDefaultCfgLive(){if(GetDefaultCfg(channel_config_array)){var d=document.getElementById("live_all_cfg");var c=document.getElementById("id_live_all");var a=document.getElementById("id_live_cfg");var b=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateValues(b,true);cfgCopy2All(d,a,c);g_bChange=true}}function CreateListLive(h,a,b,k){var d=/msie/i.test(navigator.userAgent);var j=h.outerHTML.toLowerCase();var c=j.indexOf("</tbody>");var g=document.getElementById("all_show_channel_name");j=j.substr(0,c);j+="<tr class = 'table_head_bgcolor'>";for(var e=0;e<a;e++){j+='<td style = "text-align:center">'+b[e]+"</td>"}j+="</tr>";for(var e=1;e<k+1;e++){if(!g_supportFunctions.IsSupportLiveMultiText()){if(d){j+="<tr>";j+='<td style = "width:50px;text-align:center">'+e+"</td>";j+='<td><input type = "checkbox"  name = "show_channel_name" style = "width:200px;text-align:center;" onchange = "g_bChange = true;"/></td>';j+='<td><input type = "text" style = "width:460px" name = "channel_name"onkeydown = "return LenCheck(this,event,const_camara_name_max_len);" onkeyup = "return KeyupCheck(this,const_camara_name_max_len);" onchange = "g_bChange = true;"/></td>';j+="</tr>"}else{j+="<tr>";j+='<td style = "width:50px;text-align:center">'+e+"</td>";j+='<td><input type = "checkbox"  name = "show_channel_name" style = "width:200px;text-align:center;" onchange = "g_bChange = true;"/></td>';j+='<td><input type = "text" style = "width:460px" name = "channel_name"onkeydown = "return LenCheck(this,event,const_camara_name_max_len);" onkeyup = "return KeyupCheck(this,const_camara_name_max_len);" onchange = "g_bChange = true;"/></td>';j+="</tr>"}}else{if(d){j+="<tr>";j+='<td style = "width:50px;text-align:center">'+e+"</td>";j+='<td><input type = "checkbox"  name = "show_channel_name" style = "width:100px;text-align:center;" onchange = "g_bChange = true;"/></td>';j+='<td><input type = "text" style = "width:460px" name = "channel_name"onkeydown = "return LenCheck(this,event,const_camara_name_max_len);" onkeyup = "return KeyupCheck(this,const_camara_name_max_len);" onchange = "g_bChange = true;"/></td>';j+='<td align = "center" style = "width:100px;"><input style = "width:60px;" type = "button" value = '+set_button+" onclick = 'onLiveTextConfig("+parseInt(e-1,10)+")'/></td>";j+="</tr>"}else{j+="<tr>";j+='<td style = "width:50px;text-align:center">'+e+"</td>";j+='<td><input type = "checkbox"  name = "show_channel_name" style = "width:100px;text-align:center;" onchange = "g_bChange = true;"/></td>';j+='<td><input type = "text" style = "width:460px" name = "channel_name"onkeydown = "return LenCheck(this,event,const_camara_name_max_len);" onkeyup = "return KeyupCheck(this,const_camara_name_max_len);" onchange = "g_bChange = true;"/></td>';j+='<td align = "center" style = "width:100px;"><input style = "width:60px;" type = "button" value = '+set_button+" onclick = 'onLiveTextConfig("+parseInt(e-1)+")'/></td>";j+="</tr>"}}}j+="</tbody></table>";g.checked=true;if(d){var f=h.parentElement}else{var f=h.parentNode}f.innerHTML=j;h=f.childNodes[0]}function onLiveTextConfig(a){g_curTextCfgChannel=a;var f=document.getElementById("Text_pane");f.style.display="";var d=document.getElementById("Text_list");d.innerHTML=str_ch+(a+1).toString();var c=new Array(document.getElementById("live_text_1"),document.getElementById("live_text_2"),document.getElementById("live_text_3"),document.getElementById("live_text_4"),document.getElementById("live_text_5"),document.getElementById("live_text_6"));for(var e=0;e<g_liveTextConfig.length;e++){if(g_liveTextConfig[e].channel==a){for(var b=0;b<c.length;b++){if(b==g_liveTextConfig[e].ID){c[b].value=g_liveTextConfig[e].text}}}}Align();EdgeCtrl(div_config_index,72)}function OnTextCancel(){var a=document.getElementById("Text_pane");a.style.display="none";Align();EdgeCtrl(div_config_index,72)}function OnTextOK(){var a=/msie/i.test(navigator.userAgent);var k=new Array(document.getElementById("live_text_1"),document.getElementById("live_text_2"),document.getElementById("live_text_3"),document.getElementById("live_text_4"),document.getElementById("live_text_5"),document.getElementById("live_text_6"));var f=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");for(var d=0;d<k.length;d++){for(var e=0;e<g_liveTextConfig.length;e++){if(g_liveTextConfig[e].channel==g_curTextCfgChannel&&g_liveTextConfig[e].ID==d){g_liveTextConfig[e].text=k[d].value;break}}for(var e=0;e<f.length;e++){if(f[e].getAttribute("name")==STR_LIVE_TEXT){var g=f[e].getAttribute("index");var b=parseInt(g/6);var c=parseInt(g,10)%6;if(b==g_curTextCfgChannel&&c==d){if(f[e]){if(a){f[e].nodeTypedValue=k[d].value}else{f[e].textContent=k[d].value}}break}}}}g_bChange=true;var h=document.getElementById("Text_pane");h.style.display="none";Align();EdgeCtrl(div_config_index,72)}function ConstLivelen(){var e="";var d="";var a=document.getElementById("channelconfig_errortips");var b=document.getElementsByName("channel_name");var c=true;for(i=0;i<g_ch_num;i++){channel_name_len=b[i].value.length;if(channel_name_len>const_camara_name_max_len){e=str_live_channelnamelen+cannot_more_than_tip+const_device_name_len+character;c=false}if(channel_name_len==0){d=str_live_channelnamelen+str_empty_tip;c=false}}if(!c){a.style.color="red";a.innerHTML=save_error_tip+e+d;g_bChange=false;return false}a.innerHTML="";a.display="none";return true};
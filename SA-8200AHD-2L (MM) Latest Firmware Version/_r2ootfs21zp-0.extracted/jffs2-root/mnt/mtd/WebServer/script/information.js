var g_curInfoIndex=0;var g_eventLogPath="";var g_infoPath="";var g_ChannelArray=new Array(64);function EventInfo(d,c,b,a){this.channel=d;this.type=c;this.startTime=b;this.endTime=a}function LogInfo(b,a,c,d){this.type=b;this.user=a;this.time=c;this.ip=d}function GotoInfoPage(){var b=document.getElementById("div_main_menu");var d=document.getElementById("div_info_index");var a=document.getElementById("div_info_body");var c=document.getElementById("div_info");StopWait();if(g_mainMenuItem==3){HintSave(-1)}g_mainMenuItem=5;selected(g_mainMenuItem);HideDIVs();b.style.display="";d.style.display="";a.style.display="";c.style.display="";g_lastNav="";g_lastNavSec="";if(g_xmlhttp==null){return}g_xmlhttp.open("get","body_html/body_info_index.html",false);SafeHttpSend(g_xmlhttp,null);OnReceiveInfoIndex();g_curInfoIndex=0;var e=document.getElementById("m21");NavSelected(e);GotoInfoBody("body_basic_info.html",1)}function OnReceiveInfoIndex(){var a=document.getElementById("div_info_index");if(g_xmlhttp.readyState!=4){return}a.innerHTML=g_xmlhttp.responseText;ApplyXmlLang("info_index.xml");a.actualHeight=a.offsetHeight}function GotoInfoBody(b,f){if(g_curInfoIndex==f){return}g_curInfoIndex=f;if(g_xmlhttp==null){return}g_xmlhttp.open("get","body_html/"+b,false);SafeHttpSend(g_xmlhttp,null);OnReceiveInfoBody();if(f==2){if(g_supportFunctions.IsNotSupportAlarm()&&(g_net_ch_num==0)){var c=document.getElementById("event_sensor");c.style.display="none";var d=c.parentNode;var a=d.parentNode;a.removeChild(d)}if(g_local_ch_num==0){var e=document.getElementById("event_vloss");e.parentNode.style.display="none"}}}function OnReceiveInfoBody(){var e=document.getElementById("div_info_index");var a=document.getElementById("div_info_body");var b;if(g_xmlhttp.readyState!=4){return}a.style.height="";a.innerHTML=g_xmlhttp.responseText;OnFreshInfo();EdgeCtrl(e,72);if(document.getElementById("div_info_index").offsetHeight>=document.getElementById("div_info_body").offsetHeight){var f=document.getElementById("div_info_index").offsetHeight+6;document.getElementById("div_info").style.height=f+"px";var d=/msie/i.test(navigator.userAgent);if(!d){var c=f+60;document.getElementById("work_area").style.height=c+"px"}else{}}else{var f=document.getElementById("div_info_body").offsetHeight+6;document.getElementById("div_info").style.height=f+"px";var d=/msie/i.test(navigator.userAgent);if(!d){var c=f+60;document.getElementById("work_area").style.height=c+"px"}}}function OnFreshInfo(){var f=document.getElementsByName("channel_index");InfoList.Instance().arrLogInfo=null;InfoList.Instance().curPage=0;var z=new Date();z=z.getFullYear()+"-"+AlignTime(z.getMonth()+1)+"-"+AlignTime(z.getDate());if(g_curInfoIndex==1){ApplyXmlLang("info_basic.xml");QuerySystemInfo()}else{if(g_curInfoIndex==2){var A=document.getElementById("id_event_channel");var u=document.getElementById("info_event_sdate_span");var t=document.getElementById("div_export_path");var j=document.getElementById("info_event_edate_span");var C=document.getElementById("info_event_stime_span");var r=document.getElementById("info_event_etime_span");var e=document.getElementById("info_event_list_page");var y=document.getElementById("export_path");var a=document.getElementById("export_button");if(bUseNat||!g_supportFunctions.IsSupportLogExport()){t.style.display="none"}var p=document.getElementById("event_sensor");var w=g_ch_num;if(p.checked){if((g_local_ch_num==0)&&(const_sensor_num>0)){w=const_sensor_num+g_net_ch_num}}var m=new Array();for(var n=1;n<=w;n++){m[n-1]=new CSelectOptionInfo(n,n-1)}GenCheckGroup(A,false,m,"channel_index");var b=new DateTicker("event_start_dateticker");u.innerHTML=b;u.dateName="event_start_dateticker";var s=new DateTicker("event_end_dateticker");j.innerHTML=s;j.dateName="event_end_dateticker";var h=new DateBox("event_time",false,true);C.innerHTML=h;C.dateName="event_time";var c=new DateBox("event_end_time",false,true);r.innerHTML=c;r.dateName="event_end_time";for(var o=0;o<f.length;o++){f[o].checked=true}UpdateCheckItems(A);DateTicker.all[u.dateName].setValue(z);DateTicker.all[j.dateName].setValue(z);DateBox.all[C.dateName].setValue(new Array("00","00","00"));DateBox.all[r.dateName].setValue(new Array("23","59","59"));e.innerHTML="0/0";ApplyXmlLang("info_event.xml");y.value=g_eventLogPath;a.disabled=true;a.style.color=btn_text_disabled_color}else{if(g_curInfoIndex==3){var g=document.getElementById("info_log_sdate_span");var d=document.getElementById("info_log_edate_span");var l=document.getElementById("info_log_stime_span");var v=document.getElementById("info_log_etime_span");var B=document.getElementById("info_log_list_page");var y=document.getElementById("export_path");var a=document.getElementById("export_button");var t=document.getElementById("div_export_path");if(bUseNat||!g_supportFunctions.IsSupportLogExport()){t.style.display="none"}g_calendarLogData.OnChangeMonth=function(i,k){g_calendarLogData.dayStates=0};var b=new DateTicker("log_start_dateticker");g.innerHTML=b;g.dateName="log_start_dateticker";var s=new DateTicker("log_end_dateticker");d.innerHTML=s;d.dateName="log_end_dateticker";var h=new DateBox("log_time",false,true);l.innerHTML=h;l.dateName="log_time";var c=new DateBox("log_end_time",false,true);v.innerHTML=c;v.dateName="log_end_time";DateTicker.all[g.dateName].setValue(z);DateTicker.all[d.dateName].setValue(z);DateBox.all[l.dateName].setValue(new Array("00","00","00"));DateBox.all[v.dateName].setValue(new Array("23","59","59"));B.innerHTML="0/0";ApplyXmlLang("info_log.xml");a.disabled=true;a.style.color=btn_text_disabled_color;y.value=g_infoPath}else{if(g_curInfoIndex==4){var x=document.getElementById("wireless_status_tr");var q=document.getElementById("wireless_ip_tr");ApplyXmlLang("info_net.xml");if(!g_supportFunctions.IsSupportWireless()){x.style.display="none";q.style.display="none"}QueryNeworkInfo()}else{if(g_curInfoIndex==5){ApplyXmlLang("info_online.xml");QueryOnlineUser()}}}}}}function InfoIndexControl(c,e,a,d){if((e!=-1)&&($("info_secondNav"+e).style.display=="block")){$("info_secondNav"+e).style.display="none";c.style.height="50px"}else{for(var b=1;b<=2;b++){$("info_secondNav"+b).style.display="none";$("li"+b).style.height="50px"}if(e!=-1){$("info_secondNav"+e).style.display="block";c.style.height="90px";for(var b=1;b<=2;b++){if($("li"+b)!=c){$("li"+b).style.height="50px"}}}}GotoInfoBody(a,d)}function QuerySystemInfo(){var d=new Array("../logo/qr.js");LoadMultiJSSync(d);var g=document.getElementById("info_device_name");var m=document.getElementById("info_device_id");var n=document.getElementById("info_hw_ver");var e=document.getElementById("info_mcu_ver");var i=document.getElementById("info_kernel_ver");var k=document.getElementById("info_firmware_ver");var f=document.getElementById("info_launch_date");var o=document.getElementById("info_video_format");var b=document.getElementById("info_qr_sn");g.innerHTML=const_device_name;m.innerHTML=const_device_id;if(g_bCBNUseLogo){var j=document.getElementById("dev_type_tr");j.style.display="";var p=document.getElementById("info_device_type");var l=document.getElementById("info_device_type");var c=parseInt(const_hardware_ver.split(".")[0],10);if(c==TD_2816ND_C){p.innerHTML="NNR-0816ER"}else{if(c==TD_2816NE_C){p.innerHTML="NNR-0216ER"}else{}}}n.innerHTML=const_hardware_ver;e.innerHTML=const_mcu_ver;i.innerHTML=const_kernel_ver;k.innerHTML=const_software_ver;f.innerHTML=const_build_date;o.innerHTML=g_videoFormat;if(b!=null&&qr){var h=qr.indexOf("<sn>");var a=qr.indexOf("</sn>");if(h!=-1&&a!=-1){b.innerHTML=qr.substring(h+4,a)}}}function SearchEventInfo(){var v=document.getElementById("id_event_channel");var a=document.getElementById("export_button");var m=document.getElementById("event_motion");var p=document.getElementById("event_sensor");var t=document.getElementById("event_vloss");a.disabled=true;a.style.color=btn_text_disabled_color;InfoList.Instance().curPage=0;InfoList.Instance().arrLogInfo=null;var g="";if(m.checked){g+="M"}if(!g_supportFunctions.IsNotSupportAlarm()||(g_net_ch_num!=0)){if(p.checked){g+="S"}}if(t.checked){g+="L"}var h=0;var x=0;var o=0;var d=/win32/i.test(navigator.platform);for(q=0;q<64;q++){g_ChannelArray[q]="0"}for(var e=0;e<v.rows.length;e++){var f=v.rows[e].getElementsByTagName("input");for(var q=1;q<f.length;q++){if(f[q].type.toLowerCase()=="checkbox"){if(f[q].checked){if(o<32){h|=(1<<o)}else{x|=(1<<(o-32))}g_ChannelArray[o]="1"}o++}}}h+=x*Math.pow(2,32);if((g=="")||(h==0)){UpdateEvent();return}var u=document.getElementById("info_event_sdate_span");var n=document.getElementById("info_event_edate_span");var w=document.getElementById("info_event_stime_span");var s=document.getElementById("info_event_etime_span");var b=DateTicker.all[u.dateName].getValue();var r=DateTicker.all[n.dateName].getValue();var k=DateBox.all[w.dateName].getValue();var c=DateBox.all[s.dateName].getValue();k=b+" "+k;c=r+" "+c;if(c<=k){window.alert(etime_small_than_stime_tip);UpdateEvent();return}StartWait();var l='QueryAlarmEvent("'+g+'",'+h+',"'+k+'","'+c+'")';setTimeout(l,500)}function QueryAlarmEvent(a,m,c,k){var e="";var f=/win32/i.test(navigator.platform);if(f){e="<request>\r\n";e+='<command name="'+STR_ALARM_EVENT+'">\r\n';e+="<"+STR_EVENT_TYPE+">"+a+"</"+STR_EVENT_TYPE+">\r\n";e+="<"+STR_CHANNEL_BITS+">"+m+"</"+STR_CHANNEL_BITS+">\r\n";e+="<"+STR_START_TIME+">"+c+"</"+STR_START_TIME+">\r\n";e+="<"+STR_END_TIME+">"+k+"</"+STR_END_TIME+">\r\n";e+="</command>\r\n";e+="</request>\r\n"}else{e="<request>\r\n";e+='<command name="'+STR_ALARM_EVENT+'">\r\n';e+="<"+STR_EVENT_TYPE+">"+a+"</"+STR_EVENT_TYPE+">\r\n";e+="<"+STR_CHANNEL_BITS+">"+g_ChannelArray.join("")+"</"+STR_CHANNEL_BITS+">\r\n";e+="<"+STR_START_TIME+">"+c+"</"+STR_START_TIME+">\r\n";e+="<"+STR_END_TIME+">"+k+"</"+STR_END_TIME+">\r\n";e+="</command>\r\n";e+="</request>\r\n"}var d=WebClient.ExcuteCmd(e);if(d==""){StopWait();return}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(d);g_xmlDoc.async=false;var b=g_xmlDoc.documentElement.getElementsByTagName("command");if(b.length>0){if(b[0].attributes.getNamedItem("name").nodeValue==STR_REPLY_NO_AUTH){window.alert(str_no_auth);StopWait();return}InfoList.Instance().arrLogInfo=new Array();var j=b[0].getElementsByTagName(STR_CHANNEL);var l=b[0].getElementsByTagName(STR_EVENT_TYPE);var g=b[0].getElementsByTagName(STR_START_TIME);var n=b[0].getElementsByTagName(STR_END_TIME);for(var h=0;h<j.length;h++){InfoList.Instance().arrLogInfo[h]=new EventInfo(j[h].childNodes[0].nodeValue,l[h].childNodes[0].nodeValue,g[h].childNodes[0].nodeValue,n[h].childNodes[0].nodeValue)}StopWait();UpdateEvent()}}function SearchLogInfo(){var g=document.getElementById("id_log_type");var l=document.getElementById("export_button");l.disabled=true;l.style.color=btn_text_disabled_color;InfoList.Instance().curPage=0;InfoList.Instance().arrLogInfo=null;var m=0;var h=g.getElementsByTagName("input");for(var f=0;f<h.length;f++){if(h[f].type.toLowerCase()=="checkbox"){if(h[f].checked){m|=(1<<parseInt(h[f].value,10))}}}if(m==0){UpdateLogs();return}var c=document.getElementById("info_log_sdate_span");var e=document.getElementById("info_log_edate_span");var n=document.getElementById("info_log_stime_span");var d=document.getElementById("info_log_etime_span");var b=DateTicker.all[c.dateName].getValue();var k=DateTicker.all[e.dateName].getValue();var a=DateBox.all[n.dateName].getValue();var j=DateBox.all[d.dateName].getValue();a=b+" "+a;j=k+" "+j;if(j<=a){window.alert(etime_small_than_stime_tip);UpdateLogs();return}StartWait();var o="QueryOperateLog("+m+',"'+a+'","'+j+'")';setTimeout(o,500)}function QueryOperateLog(l,c,h){var e="<request>\r\n";e+='<command name="'+STR_OPERATE_LOG+'">\r\n';e+="<"+STR_LOG_TYPE+">"+l+"</"+STR_LOG_TYPE+">\r\n";e+="<"+STR_START_TIME+">"+c+"</"+STR_START_TIME+">\r\n";e+="<"+STR_END_TIME+">"+h+"</"+STR_END_TIME+">\r\n";e+="</command>\r\n";e+="</request>\r\n";var d=WebClient.ExcuteCmd(e);if(d==""){StopWait();return}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(d);g_xmlDoc.async=false;var b=g_xmlDoc.documentElement.getElementsByTagName("command");if(b.length>0){if(b[0].attributes.getNamedItem("name").nodeValue==STR_REPLY_NO_AUTH){window.alert(str_no_auth);StopWait();return}InfoList.Instance().arrLogInfo=new Array();var j=b[0].getElementsByTagName(STR_LOG_TYPE);var k=b[0].getElementsByTagName(STR_USER_NAME);var g=b[0].getElementsByTagName(STR_START_TIME);var a=b[0].getElementsByTagName(STR_IP_ADDRESS);for(var f=0;f<j.length;f++){InfoList.Instance().arrLogInfo[f]=new LogInfo(j[f].childNodes[0].nodeValue,k[f].childNodes[0].nodeValue,g[f].childNodes[0].nodeValue,a[f].childNodes[0].nodeValue)}StopWait();UpdateLogs()}}function QueryOnlineUser(){var e="<request>\r\n";e+='<command name="'+STR_ONLINE_USER+'">\r\n';e+="</command>\r\n";e+="</request>\r\n";var b=document.getElementById("online_user_table");var d=WebClient.ExcuteCmd(e);if(d==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(d);g_xmlDoc.async=false;var c=g_xmlDoc.documentElement.getElementsByTagName("command");if(c.length>0){if(c[0].attributes.getNamedItem("name").nodeValue==STR_REPLY_NO_AUTH){window.alert(str_no_auth);return}var a=c[0].getElementsByTagName(STR_IP_ADDRESS);var j=c[0].getElementsByTagName(STR_USER_NAME);var f=c[0].getElementsByTagName(STR_CLIENT_STATUS);var h=/msie/i.test(navigator.userAgent);for(var g=0;g<a.length;g++){if(h){b.rows[g+1].cells[0].innerText=j[g].childNodes[0].nodeValue;b.rows[g+1].cells[1].innerText=a[g].childNodes[0].nodeValue;b.rows[g+1].cells[2].innerText=(f[g].childNodes[0].nodeValue=1)?str_online:""}else{b.rows[g+1].cells[0].textContent=j[g].childNodes[0].nodeValue;b.rows[g+1].cells[1].textContent=a[g].childNodes[0].nodeValue;b.rows[g+1].cells[2].textContent=(f[g].childNodes[0].nodeValue=1)?str_online:""}}}}function QueryNeworkInfo(){var f="<request>\r\n";f+='<command name="'+STR_NETWORK_INFO+'">\r\n';f+="</command>\r\n";f+="</request>\r\n";var d=WebClient.ExcuteCmd(f);if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(d);g_xmlDoc.async=false;if(d==""){return}var c=g_xmlDoc.documentElement.getElementsByTagName("command");if(c.length>0){if(c[0].attributes.getNamedItem("name").nodeValue==STR_REPLY_NO_AUTH){window.alert(str_no_auth);return}var g=c[0].getElementsByTagName(STR_NETWORK_STATUS);var b=document.getElementById("network_info_table");var h=/msie/i.test(navigator.userAgent);if(g.length>0){var i=g[0].childNodes[0].nodeValue;var e=i.split("+");if(h){b.rows[0].cells[1].innerText=e[5];b.rows[1].cells[1].innerText=e[6];b.rows[2].cells[1].innerText=e[7];b.rows[3].cells[1].innerText=e[8];b.rows[4].cells[1].innerText=e[9];b.rows[5].cells[1].innerText=e[10];b.rows[6].cells[1].innerText=e[11]}else{b.rows[0].cells[1].textContent=e[5];b.rows[1].cells[1].textContent=e[6];b.rows[2].cells[1].textContent=e[7];b.rows[3].cells[1].textContent=e[8];b.rows[4].cells[1].textContent=e[9];b.rows[5].cells[1].textContent=e[10];b.rows[6].cells[1].textContent=e[11]}if(e[1]!="0"){if(h){b.rows[7].cells[1].innerText=str_pppoe}else{b.rows[7].cells[1].textContent=str_pppoe}}else{if(e[0]!="0"){if(h){b.rows[7].cells[1].innerText=str_dynamic_ip}else{b.rows[7].cells[1].textContent=str_dynamic_ip}}else{if(h){b.rows[7].cells[1].innerText=str_static_ip}else{b.rows[7].cells[1].textContent=str_static_ip}}}if(e[3]!="0"){if(h){b.rows[7].cells[1].innerText=b.rows[7].cells[1].innerText+" + wifi"}else{b.rows[7].cells[1].textContent=b.rows[7].cells[1].innerText+" + wifi"}}if(h){b.rows[8].cells[1].innerText=((e[4]=="0")?str_disconnected:str_connect);b.rows[9].cells[1].innerText=str_disconnected}else{b.rows[8].cells[1].textContent=((e[4]=="0")?str_disconnected:str_connect);b.rows[9].cells[1].textContent=str_disconnected}if(e[2]!="0"){if(h){b.rows[9].cells[1].innerText=str_connect}else{b.rows[9].cells[1].textContent=str_connect}}if(h){b.rows[10].cells[1].innerText=e[12]}else{b.rows[10].cells[1].textContent=e[12]}}}if(g_supportFunctions.IsSupportWireless()){f="<request>\r\n";f+='<command name="'+STR_WIRELESS_NETWORK_INFO+'">\r\n';f+="</command>\r\n";f+="</request>\r\n";d=WebClient.ExcuteCmd(f);if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(d);g_xmlDoc.async=false;if(d==""){return}var c=g_xmlDoc.documentElement.getElementsByTagName("command");var b=document.getElementById("network_info_table");if(c.length>0){if(c[0].attributes.getNamedItem("name").nodeValue==STR_REPLY_NO_AUTH){window.alert(str_no_auth);return}var g=c[0].getElementsByTagName(STR_WIRELESS_NETWORK_INFO);if(g.length>0){var i=g[0].childNodes[0].nodeValue;var a=i.split("+");if(h){b.rows[12].cells[1].innerText=a[1]}else{b.rows[12].cells[1].textContent=a[1]}if(a[0]=="1"){if(h){b.rows[11].cells[1].innerText=str_connect}else{b.rows[11].cells[1].textContent=str_connect}}else{if(h){b.rows[11].cells[1].innerText=str_disconnected}else{b.rows[11].cells[1].textContent=str_disconnected}}}}}}function UpdateLogs(){var f=document.getElementById("log_info_table");var a=document.getElementById("info_log_list_page");var e=document.getElementById("export_button");var h=/msie/i.test(navigator.userAgent);var g=f.rows;if((InfoList.Instance().arrLogInfo==null)||(InfoList.Instance().arrLogInfo.length==0)){for(b=1;b<=20;b++){if(h){g[b].cells[0].innerText=" ";g[b].cells[0].title="";g[b].cells[1].innerText=" ";g[b].cells[2].innerText=" ";g[b].cells[3].innerText=" "}else{g[b].cells[0].textContent=" ";g[b].cells[0].title="";g[b].cells[1].textContent=" ";g[b].cells[2].textContent=" ";g[b].cells[3].textContent=" "}}a.innerHTML="0/0";window.alert(str_no_data_tip);return}e.disabled=false;e.style.color=btn_text_normal_color;var b=1;for(var c=InfoList.Instance().curPage*20;c<InfoList.Instance().arrLogInfo.length;c++){b=c-(InfoList.Instance().curPage*20)+1;if(b>=g.length){break}var d=parseInt(InfoList.Instance().arrLogInfo[c].type,16);if(h){g[b].cells[0].innerText=g_arrLogType[d>>16][d&65535];g[b].cells[0].title=g[b].cells[0].innerText;g[b].cells[1].innerText=InfoList.Instance().arrLogInfo[c].user;g[b].cells[2].innerText=InfoList.Instance().arrLogInfo[c].time;g[b].cells[3].innerText=InfoList.Instance().arrLogInfo[c].ip}else{g[b].cells[0].textContent=g_arrLogType[d>>16][d&65535];g[b].cells[0].title=g[b].cells[0].innerText;g[b].cells[1].textContent=InfoList.Instance().arrLogInfo[c].user;g[b].cells[2].textContent=InfoList.Instance().arrLogInfo[c].time;g[b].cells[3].textContent=InfoList.Instance().arrLogInfo[c].ip}}b=b+1;for(;b<=20;b++){if(h){g[b].cells[0].innerText=" ";g[b].cells[0].title="";g[b].cells[1].innerText=" ";g[b].cells[2].innerText=" ";g[b].cells[3].innerText=" "}else{g[b].cells[0].textContent=" ";g[b].cells[0].title="";g[b].cells[1].textContent=" ";g[b].cells[2].textContent=" ";g[b].cells[3].textContent=" "}}a.innerHTML=InfoList.Instance().curPage+1+"/"+Math.ceil(InfoList.Instance().arrLogInfo.length/20)}function UpdateEvent(){var a=document.getElementById("event_info_table");var c=document.getElementById("info_event_list_page");var h=/msie/i.test(navigator.userAgent);var m=a.rows;if((InfoList.Instance().arrLogInfo==null)||(InfoList.Instance().arrLogInfo.length==0)){for(d=1;d<=20;d++){if(h){m[d].cells[0].innerText=" ";m[d].cells[1].innerText=" ";m[d].cells[2].innerText=" ";m[d].cells[3].innerText=" "}else{m[d].cells[0].textContent=" ";m[d].cells[1].textContent=" ";m[d].cells[2].textContent=" ";m[d].cells[3].textContent=" "}}c.innerHTML="0/0";window.alert(str_no_data_tip);return}var l=document.getElementById("export_button");l.disabled=false;l.style.color=btn_text_normal_color;var d=1;var b=document.getElementById("info_event_vloss_label");var g=document.getElementById("info_event_sensor_label");var f=document.getElementById("info_event_motion_label");for(var e=InfoList.Instance().curPage*20;e<InfoList.Instance().arrLogInfo.length;e++){d=e-(InfoList.Instance().curPage*20)+1;if(d>=m.length){break}if(h){m[d].cells[0].innerText=parseInt(InfoList.Instance().arrLogInfo[e].channel,10)+1}else{m[d].cells[0].textContent=parseInt(InfoList.Instance().arrLogInfo[e].channel,10)+1}var k=InfoList.Instance().arrLogInfo[e].type;if(k=="L"){if(h){m[d].cells[1].innerText=b.innerText}else{m[d].cells[1].textContent=b.textContent}}else{if(k=="S"){if(h){m[d].cells[1].innerText=g.innerText}else{m[d].cells[1].textContent=g.textContent}}else{if(k=="M"){if(h){m[d].cells[1].innerText=f.innerText}else{m[d].cells[1].textContent=f.textContent}}}}if(h){m[d].cells[2].innerText=InfoList.Instance().arrLogInfo[e].startTime;m[d].cells[3].innerText=InfoList.Instance().arrLogInfo[e].endTime}else{m[d].cells[2].textContent=InfoList.Instance().arrLogInfo[e].startTime;m[d].cells[3].textContent=InfoList.Instance().arrLogInfo[e].endTime}}d=d+1;for(;d<=20;d++){if(h){m[d].cells[0].innerText=" ";m[d].cells[1].innerText=" ";m[d].cells[2].innerText=" ";m[d].cells[3].innerText=" "}else{m[d].cells[0].textContent=" ";m[d].cells[1].textContent=" ";m[d].cells[2].textContent=" ";m[d].cells[3].textContent=" "}}c.innerHTML=InfoList.Instance().curPage+1+"/"+Math.ceil(InfoList.Instance().arrLogInfo.length/20)}function InfoList(){this.curPage=0;this.arrLogInfo=null}InfoList.prototype={UpdatePage:function(){if(g_curInfoIndex==2){UpdateEvent()}else{if(g_curInfoIndex==3){UpdateLogs()}}},FirstPage:function(){if((this.arrLogInfo==null)||(this.arrLogInfo.length==0)){return}this.curPage=0;this.UpdatePage()},NextPage:function(){if((this.arrLogInfo==null)||(this.arrLogInfo.length==0)){return}if((this.curPage+1)*20>=this.arrLogInfo.length){return}this.curPage++;this.UpdatePage()},PrevPage:function(){if((this.arrLogInfo==null)||(this.arrLogInfo.length==0)){return}if(this.curPage>0){this.curPage--;this.UpdatePage()}},LastPage:function(){if((this.arrLogInfo==null)||(this.arrLogInfo.length==0)){return}this.curPage=Math.ceil(this.arrLogInfo.length/20)-1;this.UpdatePage()}};InfoList.instance=null;InfoList.Instance=function(){if(InfoList.instance==null){InfoList.instance=new InfoList}return InfoList.instance};var g_arrLogTypeSys=new Array("",LOG_TYPE_BOOT,LOG_TYPE_SHUTDOWN,LOG_TYPE_REBOOT,LOG_TYPE_FORMAT_SUCC,LOG_TYPE_FORMAT_FAIL,LOG_TYPE_UPGRADE_SUCC,LOG_TYPE_UPGRADE_FAIL,LOG_TYPE_CLEAR_ALARM,LOG_TYPE_OPEN_ALARM,LOG_TYPE_MANUAL_START,LOG_TYPE_MANUAL_STOP,LOG_TYPE_PTZ_ENTER,LOG_TYPE_PTZ_CTRL,LOG_TYPE_PTZ_EXIT,LOG_TYPE_AUDIO_CH_CHANGE,LOG_TYPE_VOLUME_ADJUST,LOG_TYPE_MUTE_ENABLE,LOG_TYPE_MUTE_DISENABLE,LOG_TYPE_DWELL_ENABLE,LOG_TYPE_DWELL_DISENABLE,LOG_TYPE_LOG_IN,LOG_TYPE_LOG_OFF,LOG_TYPE_CHANGE_TIME,LOG_TYPE_MANUAL_SNAP_SUCC,LOG_TYPE_MANUAL_SNAP_FAIL);var g_arrLogTypeCfg=new Array("",LOG_TYPE_CHGE_VIDEO_FORMAT,LOG_TYPE_CHGE_VGA_RESOLUTION,LOG_TYPE_CHGE_LANGUAGE,LOG_TYPE_CHGE_NET_USER_NUM,LOG_TYPE_CHGE_TIME_ZONE,LOG_TYPE_NTP_MANUAL,LOG_TYPE_NTP_ON,LOG_TYPE_NTP_OFF,LOG_TYPE_CHGE_NTP_SERVER,LOG_TYPE_CHGE_DST,LOG_TYPE_PASSWD_ON,LOG_TYPE_PASSWD_OFF,LOG_TYPE_CHGE_CAM_NAME,LOG_TYPE_MODIFY_COLOR,LOG_TYPE_CHGE_HOST_MONITOR,LOG_TYPE_CHGE_SPOT,LOG_TYPE_CHGE_OSD,LOG_TYPE_CHGE_LOCAL_ENCODE,LOG_TYPE_CHGE_REC_VIDEO_SWITCH,LOG_TYPE_CHGE_REC_AUDIO_SWITCH,LOG_TYPE_CHGE_REC_REDU_SWITCH,LOG_TYPE_CHGE_REC_PRE_TIME,LOG_TYPE_CHGE_REC_POST_TIME,LOG_TYPE_CHGE_REC_HOLD_TIME,LOG_TYPE_CHGE_SCH_SCHEDULE,LOG_TYPE_CHGE_SCH_MOTION,LOG_TYPE_CHGE_SCH_ALARM,LOG_TYPE_CHGE_SENSOR_SWITCH,LOG_TYPE_CHGE_SENSOR_TYPE,LOG_TYPE_CHGE_SENSOR_TRIGGER,LOG_TYPE_CHGE_SENSOR_SCH,LOG_TYPE_CHGE_MOTION_SWITCH,LOG_TYPE_CHGE_MOTION_SENS,LOG_TYPE_CHGE_MOTION_AREA,LOG_TYPE_CHGE_MOTION_TRIGGER,LOG_TYPE_CHGE_MOTION_SCH,LOG_TYPE_CHGE_VL_TRIGGER,LOG_TYPE_CHGE_RELAY_SWITCH,LOG_TYPE_CHGE_RELAY_SCH,LOG_TYPE_BUZZER_ON,LOG_TYPE_BUZZER_OFF,LOG_TYPE_CHGE_BUZZER_SCH,LOG_TYPE_CHGE_HTTP_PORT,LOG_TYPE_CHGE_SER_PORT,LOG_TYPE_CHGE_IP,LOG_TYPE_DHCP_SUCC,LOG_TYPE_DHCP_FAIL,LOG_TYPE_CHGE_PPPOE,LOG_TYPE_CHGE_DDNS,LOG_TYPE_NET_STREAM_CFG,LOG_TYPE_CHGE_SERIAL,LOG_TYPE_PRESET_MODIFY,LOG_TYPE_CRUISE_MODIFY,LOG_TYPE_TRACK_MODIFY,LOG_TYPE_USER_ADD,LOG_TYPE_USER_MODIFY,LOG_TYPE_USER_DELETE,LOG_TYPE_CHANGE_PASSWD,LOG_TYPE_LOAD_DEFAULT,LOG_TYPE_IMPORT_CONFIG,LOG_TYPE_EXPORT_CONFIG," "," "," "," ",LOG_TYPE_CHGE_SEND_EMAIL,LOG_TYPE_CHGE_RECV_EMAIL,LOG_TYPE_CHGE_SNAP_SETTING,LOG_TYPE_IPC_ADD,LOG_TYPE_IPC_SETUP,LOG_TYPE_IPC_DELETE,LOG_TYPE_IPC_CONN,LOG_TYPE_IPC_DISCONN);var g_arrLogTypePlayback=new Array("",LOG_TYPE_PLAYBACK_PLAY,LOG_TYPE_PLAYBACK_RESUME,LOG_TYPE_PLAYBACK_PAUSE,LOG_TYPE_PLAYBACK_FF,LOG_TYPE_PLAYBACK_REW,LOG_TYPE_PLAYBACK_STOP," "," ");var g_arrLogTypeBackup=new Array("",LOG_TYPE_BACKUP_START,LOG_TYPE_BACKUP_COMPLETE,LOG_TYPE_BACKUP_CANCEL,LOG_TYPE_BACKUP_FAIL);var g_arrLogTypeSearch=new Array("",LOG_TYPE_SEARCH_TIME,LOG_TYPE_SEARCH_EVENT,LOG_TYPE_SEARCH_FILE_MAN,LOG_TYPE_DELETE_FILE,LOG_TYPE_LOCK_FILE,LOG_TYPE_UNLOCK_FILE,LOG_TYPE_DELETE_PICTURE,LOG_TYPE_LOCK_PICTURE,LOG_TYPE_UNLOCK_PICTURE);var g_arrLogTypeViewLog=new Array("",LOG_TYPE_VIEW_SYSTEM,LOG_TYPE_VIEW_EVENT,LOG_TYPE_VIEW_LOG,LOG_TYPE_VIEW_NETWORK,LOG_TYPE_VIEW_ONLINE_USER,LOG_TYPE_VIEW_EXPORT_LOG,LOG_TYPE_VIEW_EXPORT_EVENT);var g_arrLogTypeException=new Array("",LOG_TYPE_IP_CONFLICT,LOG_TYPE_NETWORK_ERR,LOG_TYPE_DDNS_ERR,LOG_TYPE_DISK_IO_ERR,LOG_TYPE_UNKNOWN_OFF,LOG_TYPE_UNKNOWN_ERR,LOG_TYPE_ERR_9A9A9A9A,LOG_TYPE_ERR_9A000001,LOG_TYPE_ERR_9A000002,LOG_TYE_DISK_WARNING,LOG_TYPE_DISK_DISCONNECT,LOG_TYPE_DISK_FULL);var g_arrLogType=new Array();g_arrLogType[1]=g_arrLogTypeSys;g_arrLogType[2]=g_arrLogTypeCfg;g_arrLogType[4]=g_arrLogTypePlayback;g_arrLogType[8]=g_arrLogTypeBackup;g_arrLogType[16]=g_arrLogTypeSearch;g_arrLogType[32]=g_arrLogTypeViewLog;g_arrLogType[64]=g_arrLogTypeException;function EventExport(){var m=document.getElementById("export_path");var i=document.getElementById("info_event_motion_label");var j=document.getElementById("info_event_sensor_label");var c=document.getElementById("info_event_vloss_label");var k=/msie/i.test(navigator.userAgent);if(m.value==""){return}if((InfoList.Instance().arrLogInfo==null)||(InfoList.Instance().arrLogInfo.length==0)){return}var o="<request>\r\n";o+='<command name="'+STR_LM_EVENT_STRING+'">\r\n';if(k){o+='<item id="1">'+i.innerText+"</item>\r\n";if(!g_supportFunctions.IsNotSupportAlarm()||(g_net_ch_num!=0)){o+='<item id="2">'+j.innerText+"</item>\r\n"}o+='<item id="4">'+c.innerText+"</item>\r\n"}else{o+='<item id="1">'+i.textContent+"</item>\r\n";if(!g_supportFunctions.IsNotSupportAlarm()||(g_net_ch_num!=0)){o+='<item id="2">'+j.textContent+"</item>\r\n"}o+='<item id="4">'+c.textContent+"</item>\r\n"}o+="</command>\r\n";o+="</request>\r\n";WebClient.ExcuteLocalCmd(o);var e=document.getElementById("event_tabel_label");var g=document.getElementById("info_event_channel_label");var b=document.getElementById("info_event_type_label");var h=document.getElementById("info_event_starttime_label");var n=document.getElementById("info_event_endtime_label");var l=document.getElementById("info_event_first");var f=document.getElementById("info_event_previous");var d=document.getElementById("info_event_next");var a=document.getElementById("info_event_end");o="<request>\r\n";o+='<command name="'+STR_LM_EVENT_EXPORT+'">\r\n';if(k){o+="<"+STR_PATH+">"+m.value+"</"+STR_PATH+">\r\n";o+="<"+STR_TITLE+">"+e.innerText+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+g.innerText+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+b.innerText+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+h.innerText+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+n.innerText+"</"+STR_TITLE+">\r\n"}else{o+="<"+STR_PATH+">"+m.value+"</"+STR_PATH+">\r\n";o+="<"+STR_TITLE+">"+e.textContent+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+g.textContent+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+b.textContent+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+h.textContent+"</"+STR_TITLE+">\r\n";o+="<"+STR_TITLE+">"+n.textContent+"</"+STR_TITLE+">\r\n"}o+="<"+STR_TIP+">"+l.title+"</"+STR_TIP+">\r\n";o+="<"+STR_TIP+">"+f.title+"</"+STR_TIP+">\r\n";o+="<"+STR_TIP+">"+d.title+"</"+STR_TIP+">\r\n";o+="<"+STR_TIP+">"+a.title+"</"+STR_TIP+">\r\n";o+="<"+STR_TIP+">"+str_records+"</"+STR_TIP+">\r\n";o+="<"+STR_TIP+">"+str_is_the_last_tip+"</"+STR_TIP+">\r\n";o+="<"+STR_TIP+">"+str_is_the_first_tip+"</"+STR_TIP+">\r\n";o+="</command>\r\n";o+="</request>\r\n";WebClient.ExcuteLocalCmd(o);window.alert(str_export_finish)}function LogExport(){var m=document.getElementById("export_path");var l=/msie/i.test(navigator.userAgent);if(m.value==""){return}if((InfoList.Instance().arrLogInfo==null)||(InfoList.Instance().arrLogInfo.length==0)){return}var p="<request>\r\n";p+='<command name="'+STR_LM_LOG_STRING+'">\r\n';for(var g=0;g<=64;g++){if(g_arrLogType[g]!=null){for(var e=1;e<g_arrLogType[g].length;e++){p+='<item id="'+((g<<16)+e)+'">'+g_arrLogType[g][e]+"</item>\r\n"}}}p+="</command>\r\n";p+="</request>\r\n";WebClient.ExcuteLocalCmd(p);var h=document.getElementById("log_tabel_label");var c=document.getElementById("info_log_type_label");var a=document.getElementById("info_log_username_label");var n=document.getElementById("info_log_time_label");var k=document.getElementById("info_log_ip_label");var o=document.getElementById("info_log_first");var d=document.getElementById("info_log_previous");var f=document.getElementById("info_log_next");var b=document.getElementById("info_log_end");p="<request>\r\n";p+='<command name="'+STR_LM_LOG_EXPORT+'">\r\n';p+="<"+STR_PATH+">"+m.value+"</"+STR_PATH+">\r\n";if(l){p+="<"+STR_TITLE+">"+h.innerText+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+c.innerText+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+a.innerText+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+n.innerText+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+k.innerText+"</"+STR_TITLE+">\r\n"}else{p+="<"+STR_TITLE+">"+h.textContent+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+c.textContent+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+a.textContent+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+n.textContent+"</"+STR_TITLE+">\r\n";p+="<"+STR_TITLE+">"+k.textContent+"</"+STR_TITLE+">\r\n"}p+="<"+STR_TIP+">"+o.title+"</"+STR_TIP+">\r\n";p+="<"+STR_TIP+">"+d.title+"</"+STR_TIP+">\r\n";p+="<"+STR_TIP+">"+f.title+"</"+STR_TIP+">\r\n";p+="<"+STR_TIP+">"+b.title+"</"+STR_TIP+">\r\n";p+="<"+STR_TIP+">"+str_records+"</"+STR_TIP+">\r\n";p+="<"+STR_TIP+">"+str_is_the_last_tip+"</"+STR_TIP+">\r\n";p+="<"+STR_TIP+">"+str_is_the_first_tip+"</"+STR_TIP+">\r\n";p+="</command>\r\n";p+="</request>\r\n";WebClient.ExcuteLocalCmd(p);window.alert(str_export_finish)}function OnCheckSensor(){var g=document.getElementById("id_event_channel");var b=document.getElementsByName("channel_index");var d=document.getElementById("event_sensor");while(g.rows.length>0){g.deleteRow(0)}var f=g_ch_num;if(d.checked){if((g_local_ch_num==0)&&(const_sensor_num>0)){f=const_sensor_num+g_net_ch_num}}var e=new Array();for(var a=1;a<=f;a++){e[a-1]=new CSelectOptionInfo(a,a-1)}GenCheckGroup(g,false,e,"channel_index");for(var c=0;c<b.length;c++){b[c].checked=true}UpdateCheckItems(g)};
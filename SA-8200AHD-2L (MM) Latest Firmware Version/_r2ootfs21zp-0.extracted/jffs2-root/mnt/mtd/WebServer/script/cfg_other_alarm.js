var g_alarmType=1;var g_diskAlarmSpace=new Array(new CSelectOptionInfo("0 MB",0),new CSelectOptionInfo("128 MB",128),new CSelectOptionInfo("256 MB",256),new CSelectOptionInfo("384 MB",384),new CSelectOptionInfo("512 MB",512),new CSelectOptionInfo("1024 MB",1024),new CSelectOptionInfo("2048 MB",2048),new CSelectOptionInfo(str_none,-1));var g_otherAlarmType=new Array(new CSelectOptionInfo(str_disk_full,1),new CSelectOptionInfo(str_ip_conflict,2),new CSelectOptionInfo(str_net_disconnect,3),new CSelectOptionInfo(str_disk_warning,4),new CSelectOptionInfo(str_disk_disconnect,5));function OnLoadCfgOtherAlarm(){var b=document.getElementById("disk_alarm_free_space");var f=document.getElementById("other_alarm_type");var e=document.getElementById("other_alarm_trigger_out");var f=document.getElementById("other_alarm_type");ApplyXmlLang("cfg_other_alarm.xml");GenSelectListEx(b,g_diskAlarmSpace);GenSelectListEx(f,g_otherAlarmType);GenCheckGroup(e,true,g_alarmoutList,STR_DISK_FULL_TO_ALARM_OUT,4,Bchange);ChangeAlarmType(f);if(g_supportFunctions.IsNotSupportAlarm()){document.getElementById("other_to_alarm_out").style.display="none";document.getElementById("other_to_alarm_out").parentNode.style.display="none";e.style.display="none";e.parentNode.parentNode.style.display="none"}var c=CreateConfigReqXml(other_alarm_config_array);var a=WebClient.ExcuteCmd(c);if(a==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(a);g_xmlDoc.async=false;var d=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateOtherAlarm(d,true,STR_DISK_FULL_BUZZER,STR_DISK_FULL_TO_EMAIL,STR_DISK_FULL_TO_ALARM_OUT);Align()}function LoadDefaultCfgOtherAlarm(){if(GetDefaultCfg(other_alarm_config_array)){var a=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");var d=document.getElementById("other_alarm_type");var b=document.getElementById("disk_alarm_tr");var c=document.getElementById("alarm_email_tr");g_alarmType=1;d.value=1;b.style.display="";c.style.display="";UpdateOtherAlarm(a,true,STR_DISK_FULL_BUZZER,STR_DISK_FULL_TO_EMAIL,STR_DISK_FULL_TO_ALARM_OUT);g_bChange=true}}function ChangeAlarmType(c){var a=document.getElementById("disk_alarm_tr");var b=document.getElementById("alarm_email_tr");if(g_alarmType==1){UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),false,STR_DISK_FULL_BUZZER,STR_DISK_FULL_TO_EMAIL,STR_DISK_FULL_TO_ALARM_OUT)}if(g_alarmType==2){UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),false,STR_IP_CONFLICT_BUZZER,STR_IP_CONFLICT_TO_EMAIL,STR_IP_CONFLICT_TO_ALARM_OUT)}if(g_alarmType==3){UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),false,STR_DISCONNECT_BUZZER,STR_DISCONNECT_TO_EMAIL,STR_DISCONNECT_TO_ALARM_OUT)}if(g_alarmType==4){UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),false,STR_DISK_WARNING_BUZZER,STR_DISK_WARNING_TO_EMAIL,STR_DISK_WARNING_TO_ALARM_OUT)}if(g_alarmType==5){UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),false,STR_DISK_DISCONNECT_BUZZER,STR_DISK_DISCONNECT_TO_EMAIL,STR_DISK_DISCONNECT_TO_ALARM_OUT)}if(c.value==1){a.style.display="";b.style.display="";UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true,STR_DISK_FULL_BUZZER,STR_DISK_FULL_TO_EMAIL,STR_DISK_FULL_TO_ALARM_OUT)}if(c.value==2){a.style.display="none";b.style.display="none";UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true,STR_IP_CONFLICT_BUZZER,STR_IP_CONFLICT_TO_EMAIL,STR_IP_CONFLICT_TO_ALARM_OUT)}else{if(c.value==3){a.style.display="none";b.style.display="none";UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true,STR_DISCONNECT_BUZZER,STR_DISCONNECT_TO_EMAIL,STR_DISCONNECT_TO_ALARM_OUT)}else{if(c.value==4){a.style.display="none";b.style.display="";UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true,STR_DISK_WARNING_BUZZER,STR_DISK_WARNING_TO_EMAIL,STR_DISK_WARNING_TO_ALARM_OUT)}else{if(c.value==5){a.style.display="none";b.style.display="";UpdateOtherAlarm(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true,STR_DISK_DISCONNECT_BUZZER,STR_DISK_DISCONNECT_TO_EMAIL,STR_DISK_DISCONNECT_TO_ALARM_OUT)}}}}g_alarmType=c.value}function UpdateOtherAlarm(m,e,f,g,l){var h=document.getElementById("other_alarm_buzzer");var b=document.getElementById("other_alarm_email");var d=document.getElementById("disk_alarm_free_space");for(i=0;i<m.length;i++){if(e){if(f==m[i].attributes.getNamedItem("name").nodeValue){h.checked=(parseInt(m[i].childNodes[0].nodeValue,10))?true:false}if(g==m[i].attributes.getNamedItem("name").nodeValue){b.checked=(parseInt(m[i].childNodes[0].nodeValue,10))?true:false}if(l==m[i].attributes.getNamedItem("name").nodeValue){var a=document.getElementsByName(STR_DISK_FULL_TO_ALARM_OUT);var c=m[i].childNodes[0].nodeValue.toString();for(j=0;j<a.length;j++){var k=parseInt(a[j].value,10);if(c.charAt(k)=="1"){a[j].checked=true}else{a[j].checked=false}}}if(g_alarmType==1){if(STR_DISK_ALARM_FREE_SPACE==m[i].attributes.getNamedItem("name").nodeValue){d.value=m[i].childNodes[0].nodeValue}}}else{if(f==m[i].attributes.getNamedItem("name").nodeValue){m[i].childNodes[0].nodeValue=(h.checked)?1:0}if(g==m[i].attributes.getNamedItem("name").nodeValue){m[i].childNodes[0].nodeValue=(b.checked)?1:0}if(l==m[i].attributes.getNamedItem("name").nodeValue){var a=document.getElementsByName(STR_DISK_FULL_TO_ALARM_OUT);var c=new Array(64);for(j=0;j<c.length;j++){c[j]="0"}for(j=0;j<a.length;j++){var k=parseInt(a[j].value,10);if(a[j].checked){c[k]="1"}}m[i].childNodes[0].nodeValue=c.join("")}if(g_alarmType==1){if(STR_DISK_ALARM_FREE_SPACE==m[i].attributes.getNamedItem("name").nodeValue){m[i].childNodes[0].nodeValue=d.value}}}}};
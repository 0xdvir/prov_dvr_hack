var g_CurPage=0;function CreateGrid(d,f,k,l,c,m){var h=/msie/i.test(navigator.userAgent);var a=0;var j=0;var b="";var g=f/k-1;a=document.createElement("div");j=document.createElement("div");j.style.cssText="width:"+g+"px;height:"+d+"px;margin:auto;position:relative;background-color:"+l+";border-right:solid 1px "+c+";float:left;";for(var e=0;e<k;e++){j.index=e;if(m!=null){j.innerHTML=m[e]}b+=j.outerHTML}a.innerHTML=b;return a}function RecDataTimeShow(g,m){var h=480;var c=16;var o=80;var a=0;var e=0;var j=0;var l=0;var b=0;var d="";a=document.createElement("div");a.style.cssText="margin:auto;border:solid 1px;background-color:"+timeSearchHead+";height:"+c+"px;width:"+(o-3)+"px;position:relative;text-align:center;float:left;";a.innerHTML=m;d+=a.outerHTML;var n=new Array(6);for(var f=0;f<6;f++){n[f]="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+AlignTime(f*4)+":00"}e=CreateGrid(c,h,6,timeSearchHead,timeSearchHeadBorder,n);e.style.cssText="margin:auto;width:"+h+"px;height:"+c+"px;position:relative;border-top:solid 1px;border-bottom:solid 1px;border-right:solid 1px;float:left;text-align:left;";d+=e.outerHTML;a.style.cssText="margin:auto;border-left:solid 1px;border-bottom:solid 1px;border-right:solid 1px;height:"+c+"px;width:"+(o-3)+"px;position:relative;text-align:center;float:left;";j=CreateGrid(c,h,24,timeSearchEare,timeSearchEareBorder);for(var k=1;k<=g_TotalChannelList.length;k++){a.innerHTML=k;d+=a.outerHTML;j.id="div_time_info0"+k;j.index=k;j.style.cssText="margin:auto;width:"+h+"px;height:"+c+"px;position:relative;border-bottom:solid 1px;border-right:solid 1px;float:left;";d+=j.outerHTML}g.innerHTML=d}function RecDataTimeShow_Channel(h,o,m,b){var j=480;var d=16;var q=80;var a=0;var f=0;var k=0;var n=0;var c=0;var e="";a=document.createElement("div");a.style.cssText="margin:auto;border:solid 1px;background-color:"+timeSearchHead+";height:"+d+"px;width:"+(q-3)+"px;position:relative;text-align:center;float:left;";a.innerHTML=o;e+=a.outerHTML;var p=new Array(6);for(var g=0;g<6;g++){p[g]="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+AlignTime(g*4)+":00"}f=CreateGrid(d,j,6,timeSearchHead,timeSearchHeadBorder,p);f.style.cssText="margin:auto;width:"+j+"px;height:"+d+"px;position:relative;border-top:solid 1px;border-bottom:solid 1px;border-right:solid 1px;float:left;text-align:left;";e+=f.outerHTML;a.style.cssText="margin:auto;border-left:solid 1px;border-bottom:solid 1px;border-right:solid 1px;height:"+d+"px;width:"+(q-3)+"px;position:relative;text-align:center;float:left;";k=CreateGrid(d,j,24,timeSearchEare,timeSearchEareBorder);for(var l=m;l<=b;l++){a.innerHTML=str_ch+" "+l;e+=a.outerHTML;k.id="div_time_info0"+l;k.index=l;k.style.cssText="margin:auto;width:"+j+"px;height:"+d+"px;position:relative;border-bottom:solid 1px;border-right:solid 1px;float:left;";e+=k.outerHTML}h.innerHTML=e}function ClearTimeInfo(b){if(g_TotalChannelList.length<=16){for(var c=1;c<=g_TotalChannelList.length;c++){var a=document.getElementById("div_time_info0"+c);if(a==null){continue}var d=a.getElementsByTagName("div");while(d.length>24){a.removeChild(d[24])}}}else{for(var c=1;c<=8;c++){var a=document.getElementById("div_time_info0"+c);if(a==null){continue}var d=a.getElementsByTagName("div");while(d.length>24){a.removeChild(d[24])}}}}function SetTimeInfo(g,m,z){if(z<=0){return}var q=document.getElementById("div_time_info0"+z);if(q==null){return}var k=q.getElementsByTagName("div");var x=document.createElement("div");x.style.cssText="background-color:#8080ff; border:0; position:absolute;";x.style.height="16px";q.appendChild(x);var n=0;var u=k[0].offsetTop;var b=q;while(b!=x.offsetParent){n+=b.offsetLeft;u+=b.offsetTop;b=b.offsetParent}var r=new Array();var f=m.length;for(var t=0;t<f;t++){var y=0;for(var s=1;s<m.length;s++){if(m[y].startTime>m[s].startTime){y=s}}var e=new Date(m[y].startTime*1000);var l=e.getHours();var p=e.getMinutes();var w=e.getSeconds();var c=Math.floor((l*3600+p*60+w)*q.offsetWidth/86400);var d=new Date(m[y].endTime*1000);var l=d.getHours();var p=d.getMinutes();var w=d.getSeconds();var a=Math.floor((l*3600+p*60+w)*q.offsetWidth/86400);if(r.length>0){if(c<=r[r.length-1].endPos){r[r.length-1].endPos=Math.max(a,r[r.length-1].endPos)}else{r[r.length]=new Object();r[r.length-1].startPos=c;r[r.length-1].endPos=a}}else{r[r.length]=new Object();r[r.length-1].startPos=c;r[r.length-1].endPos=a}m.splice(y,1)}for(t=0;t<r.length;t++){var v=r[t].startPos+n;var o=u;var h=r[t].endPos-r[t].startPos+1;x.style.left=v+"px";x.style.top=o+"px";x.style.width=h+"px";if(t<(r.length-1)){x=document.createElement("div");x.style.cssText="background-color:#8080ff; border:0; position:absolute;";x.style.height="16px";q.appendChild(x)}}}function GotoLastPage_timesearch(){var a=document.getElementById("time_search_list_page");var c=document.getElementById("time_search_hour");if(g_CurPage>=Math.ceil(g_TotalChannelList.length/8-1)){return}g_CurPage=Math.ceil(g_TotalChannelList.length/8)-1;var d=(Math.ceil(g_TotalChannelList.length/8)*8)-8+1;var b=Math.ceil(g_TotalChannelList.length/8)*8;RecDataTimeShow_Channel(c,str_ch,d,b);ShowRecTimeInfo();a.innerHTML=g_CurPage+1+"/"+Math.ceil(g_TotalChannelList.length/8)}function GotoNextPage_timesearch(){var a=document.getElementById("time_search_list_page");var c=document.getElementById("time_search_hour");if(g_CurPage>=Math.ceil(g_TotalChannelList.length/8-1)){return}g_CurPage++;var d=g_CurPage*8+1;var b=g_CurPage*8+8;RecDataTimeShow_Channel(c,str_ch,d,b);ShowRecTimeInfo();a.innerHTML=g_CurPage+1+"/"+Math.ceil(g_TotalChannelList.length/8)}function GotoPrevPage_timesearch(){var a=document.getElementById("time_search_list_page");var c=document.getElementById("time_search_hour");if(g_CurPage<=0){return}g_CurPage--;var d=g_CurPage*8+1;var b=g_CurPage*8+8;RecDataTimeShow_Channel(c,str_ch,d,b);ShowRecTimeInfo();a.innerHTML=g_CurPage+1+"/"+Math.ceil(g_TotalChannelList.length/8)}function GotoFirstPage_timesearch(){var a=document.getElementById("time_search_list_page");var c=document.getElementById("time_search_hour");if(g_CurPage<=0){return}g_CurPage=0;var d=1;var b=8;RecDataTimeShow_Channel(c,str_ch,d,b);ShowRecTimeInfo();a.innerHTML=g_CurPage+1+"/"+Math.ceil(g_TotalChannelList.length/8)};
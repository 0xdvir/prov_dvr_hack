var cfg_netstream_header=new Array(str_ch,str_resolution,str_rate,str_encodetype,str_quality,str_maxbitrate);var g_bNetworkPassTest=true;var g_bDDNSPassTest=true;var g_networkType="0";var g_bNATOpenNeedCheck=false;function ShowNetwork(a){var b=document.getElementById("network_table");var c=b.rows;if(a=="1"&&g_supportFunctions.IsSupportWireless()){for(i=3;i<=13;i++){c[i].style.display="none"}}else{for(i=20;i<=26;i++){c[i].style.display="none"}}}function ShowIPv6(){var a=document.getElementById("network_table");var b=a.rows;if(!g_supportFunctions.IsSupportIPV6()){for(i=9;i<=15;i++){b[i].style.display="none"}b[2].style.display="none"}}function OnLoadCfgNetwork(){var k=document.getElementById("ddns_type");var A=document.getElementById("ddns_update_cycle");var m=document.getElementById("ip_address");var n=document.getElementById("net_mask");var w=document.getElementById("gate_way");var t=document.getElementById("net_dns1");var p=document.getElementById("net_dns2");var f=document.getElementById("autoIp");var B=document.getElementById("staticIP");var g=document.getElementById("wireless_type");var C=document.getElementById("ipv6_address");var h=document.getElementById("ipv6_net_mask");var j=document.getElementById("ipv6_gateway");var s=document.getElementById("ipv6_dns1");var q=document.getElementById("ipv6_dns2");ApplyXmlLang("cfg_net.xml");g_curConfigIndex=61;GenSelectListEx(k,g_ddnsDomainInfo);GenSelectListEx(A,g_ddnsUpdateServer);GenSelectListEx(g,g_wirelessType);k.value=0;var e=new MultiEdit("ip1",1);m.innerHTML=e;m.ipName="ip1";var d=new MultiEdit("ip2",1);n.innerHTML=d;n.ipName="ip2";var c=new MultiEdit("ip3",1);w.innerHTML=c;w.ipName="ip3";var b=new MultiEdit("ip4",1);t.innerHTML=b;t.ipName="ip4";var a=new MultiEdit("ip5",1);p.innerHTML=a;p.ipName="ip5";var z=new MultiEdit("ipv6_1",2);C.innerHTML=z;C.ipName="ipv6_1";var x=new MultiEdit("ipv6_2",3);h.innerHTML=x;h.ipName="ipv6_2";var v=new MultiEdit("ipv6_3",2);j.innerHTML=v;j.ipName="ipv6_3";var r=new MultiEdit("ipv6_4",2);s.innerHTML=r;s.ipName="ipv6_4";var o=new MultiEdit("ipv6_5",2);q.innerHTML=o;q.ipName="ipv6_5";var u=CreateConfigReqXml(net_config_array);var y=WebClient.ExcuteCmd(u);if(y==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(y);g_xmlDoc.async=false;UpdateValues(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true);UpdateNetwork(true);PPPoeEnable(document.getElementsByName("pppoe_enable")[0]);DdnsEnable(document.getElementsByName("ddns_enable")[0]);DisServerName(k);DisDomain(k);DisUpdateCycle(k);ShowUserSuffix(k);IPAuto(f);IPStatic(B);UpdateWirelessNetwork(true);ShowNetwork(g_networkType);ShowIPv6();if(g_net_ch_num!=0){var l=document.getElementById("upnp_label");l.parentNode.style.display="none"}Align()}function OnLoadCfgServer(){ApplyXmlLang("cfg_net_autoreport.xml");g_curConfigIndex=75;var b=CreateConfigReqXml(net_server_config_array);var a=WebClient.ExcuteCmd(b);if(a==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(a);g_xmlDoc.async=false;Align();UpdateAutoReport(true)}function OnLoadCfgNAT(){ApplyXmlLang("cfg_net_nat_autoreport.xml");g_curConfigIndex=77;if(g_US02){document.getElementById("tr_nat_addr").style.display="none"}var b=document.getElementById("nat_check");var c=CreateNATReqXml(net_nat_config_array);var a=WebClient.ExcuteCmd(c);if(a==""){b.disabled=true;document.getElementById("nat_addr").disabled=true;document.getElementById("default_btn").disabled=true;document.getElementById("default_btn1").disabled=true;document.getElementById("save_btn").disabled=true;document.getElementById("save_btn1").disabled=true;return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(a);g_xmlDoc.async=false;Align();UpdateNATConfigInfo(true);if(b.checked==true){g_bNATOpenNeedCheck=false}else{g_bNATOpenNeedCheck=true}}function LoadDefaultCfgNetwork(){var a=document.getElementById("ddns_type");if(GetDefaultCfg(net_config_array)){UpdateValues(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true);UpdateNetwork(true);UpdateWirelessNetwork(true);PPPoeEnable(document.getElementsByName("pppoe_enable")[0]);DdnsEnable(document.getElementsByName("ddns_enable")[0]);DisServerName(a);DisDomain(a);DisUpdateCycle(a);ShowUserSuffix(a);IPAuto(autoIp);IPStatic(staticIP);g_bChange=true;Align()}}function LoadDefaultCfgAutoReport(){if(GetDefaultCfg(net_server_config_array)){UpdateAutoReport(true);g_bChange=true;Align()}}function LoadDefaultCfgNATAutoReport(){var a=document.getElementById("nat_check");UpdateNATConfigInfo(true);g_bChange=true;a.checked=false;Align()}function LoadDefaultCfgWirelessNetWork(){if(GetDefaultCfg(net_wireless_network_array)){UpdateWirelessNetwork(true);g_bChange=true;Align()}}function UpdateSubStreamNetChnnelStatus(){if(g_net_ch_num>0){var a=document.getElementsByName("net_resolution");for(var b=g_local_ch_num;b<g_local_ch_num+g_net_ch_num;b++){if(g_majorNetChannelEncodeProperty[b-g_local_ch_num].online!=1){var c=a[b].parentNode;c.parentNode.style.display="none";c.parentNode.style.border=0}}}}function CreateRequestSecondCheckEncInfo(h){var e=document.getElementsByName("net_resolution");var b=document.getElementsByName("net_frame_rate");var c=document.getElementsByName("net_maxbit_stream");var d=document.getElementById("all_net_resolution");var a=document.getElementById("all_net_frame_rate");var f=document.getElementById("all_net_maxbit_stream");var j="<request>\r\n";j+='<command name="'+STR_REQUEST_SECOND_CHECK_ENC_INFO+'" channel="'+h+'">\r\n';if(h==255){for(var g=0;g<e.length;g++){j+="<parameter>"+parseInt(d.value,10)+"+"+parseInt(a.value,10)+"+"+parseInt(f.value,10)+"</parameter>\r\n"}}else{for(var g=0;g<e.length;g++){j+="<parameter>"+e[g].value+"+"+b[g].value+"+"+c[g].value+"</parameter>\r\n"}}j+="</command>\r\n";j+="</request>\r\n";return j}function CheckSecondStreamConfigParams(e){var a=document.getElementsByName("net_resolution");var l=document.getElementsByName("net_frame_rate");var f=document.getElementsByName("net_maxbit_stream");var m=document.getElementById("all_net_resolution");var k=document.getElementById("all_net_frame_rate");var h=document.getElementById("all_net_maxbit_stream");var b=CreateRequestSecondCheckEncInfo(e);var g=WebClient.ExcuteCmd(b);if(g==""){return}if(g_xmlCheckSecondConfigDoc!=null){delete g_xmlCheckSecondConfigDoc;g_xmlCheckSecondConfigDoc=null}g_xmlCheckSecondConfigDoc=FormatToXmlDOM(g);g_xmlCheckSecondConfigDoc.async=false;var d=g_xmlCheckSecondConfigDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");if(e==255){var j=d[0].childNodes[0].nodeValue.split("+");if(k.value>parseInt(j[1],10)){window.alert(str_total_frame_rate_exceed)}m.value=j[0];k.value=j[1];h.value=j[2]}else{for(var c=0;c<d.length;c++){var j=d[c].childNodes[0].nodeValue.split("+");if(c==e&&(l[c].value>parseInt(j[1],10))){window.alert(str_total_frame_rate_exceed)}a[c].value=j[0];l[c].value=j[1];f[c].value=j[2]}}}function CreateRequestSecondSupportInfo(b){var a="<request>\r\n";a+='<command name="'+STR_REQUEST_SECOND_SUPPORT_INFO+'" channel="'+b+'">\r\n';a+="</command>\r\n";a+="</request>\r\n";return a}function GetSecondLocalEncodeInfo(){var d=CreateRequestSecondSupportInfo(0);var g=WebClient.ExcuteCmd(d);if(g==""){return}var j=FormatToXmlDOM(g);j.async=false;var a=j.documentElement.getElementsByTagName("command")[0].getElementsByTagName("Item");g_minorLocalChannelEncodeProperty=[];for(var e=0;e<a.length;e++){var b=a[e].getAttribute("channel");g_minorLocalChannelEncodeProperty[e]={};g_minorLocalChannelEncodeProperty[e].channel=b;var f=[];var h=a[e].getElementsByTagName("encInfo");for(var c=0;c<h.length;c++){f[c]={};f[c].channel=b;f[c].videoSize=h[c].getAttribute("videoSize");f[c].Rate=h[c].getAttribute("Rate");f[c].maxBitRate=h[c].getAttribute("maxBitRate");f[c].defBitrate=h[c].getAttribute("defBitrate")}g_minorLocalChannelEncodeProperty[e].encInfo=f}}function OnLoadCfgNetStream(){if(g_supportFunctions.IsSupportLocalSubStreamConfig()){GetSecondLocalEncodeInfo()}var g=/msie/i.test(navigator.userAgent);var x=document.getElementById("all_net_resolution");var e=document.getElementById("all_net_encode_type");var A=document.getElementById("all_net_maxbit_stream");var d=document.getElementById("all_net_video_quality");var o=document.getElementById("all_net_frame_rate");var b=document.getElementById("remain_source");var n=document.getElementById("id_net_stream_cfg");var k=parseInt(const_hardware_ver.split(".")[0],10);if(k==TD_2604LD_S||k==TD_2608LD_S||k==TD_2616LD_S||k==TD_2604LD||k==TD_2608LD||k==TD_2616LD){b.style.display="none"}for(u=0;u<g_minorEncodeProperty.length;u++){if(g_minorEncodeProperty[u].resolution>8){b.style.display="none";break}}ApplyXmlLang("cfg_net_stream.xml");if(g_net_ch_num>0){GetNetChannelEncodeInfo(1)}CreateListNet(n,g_local_ch_num+g_net_ch_num);var c=g_avNetStreamInfo.defaultResolution;var h=new Array();h[0]=new CSelectOptionInfo("CIF",2);if(c==8){h[1]=new CSelectOptionInfo("D1",8)}GenSelectListEx(x,h);var t=g_avNetStreamInfo.supportEncodeMode.slice(0);var z=g_avNetStreamInfo.defaultEncodeMode;if(g_net_ch_num>0){for(var u=0;u<t.length;u++){if(t[u].optionValue==1){t.splice(u,1)}}z=t[0].optionValue}GenSelectListEx(e,t);GenSelectListEx(A,GetsuitableBiteRate(g_avNetStreamInfo.defaultResolution,false,true));GenSelectListEx(d,g_avNetStreamInfo.supportQuarlity);x.value=g_avNetStreamInfo.defaultResolution;e.value=z;if(IL03&&(g_local_ch_num>0)){GenSelectListEx(e,g_avNetStreamInfo.supportEncodeMode);e.value=g_avNetStreamInfo.defaultEncodeMode}A.value=g_avNetStreamInfo.defaultBitrate;d.value=g_avNetStreamInfo.defaultQuarlity;var q=CreateConfigReqXml(net_stream_array);var s=WebClient.ExcuteCmd(q);if(s==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(s);g_xmlDoc.async=false;UpdateNetStreamCfg(true);var a=document.getElementsByName("net_resolution");var v=document.getElementsByName("net_frame_rate");var p=document.getElementsByName("net_video_quality");for(var r=0;r<g_local_ch_num+g_net_ch_num;r++){OnNetChangeResolution(a[r],r,true)}OnAllNetChangeResolution(x);var w=(g_videoFormat=="PAL")?g_avNetStreamInfo.defaultChnnRateNumPal:g_avNetStreamInfo.defaultChnnRateNumNtsc;o.value=w;UpdateNetStreamCfg(true);OnNetStreamCheckAll();if(k==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var r=0;r<v.length;r++){v[r].disabled=false}}if(g_net_ch_num>0){for(var r=g_local_ch_num;r<v.length;r++){v[r].disabled=false}}var j=(g_videoFormat=="PAL")?g_avNetStreamInfo.totalRatePalOnCif:g_avNetStreamInfo.totalRateNtscOnCif;var f=0;if(k==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var l=0;l<v.length;l++){f+=ConvertCifRateForXD_M(parseInt(v[l].value,10),parseInt(a[l].value,10))}}else{for(var l=0;l<v.length;l++){if(l>=g_local_ch_num){continue}f+=ConvertCifRate(parseInt(v[l].value,10),parseInt(a[l].value,10))}}var y=(j-f);if(g){b.innerText=str_source_remain+": "+y+"(CIF)."}else{b.textContent=str_source_remain+": "+y+"(CIF)."}if(g_net_ch_num>0){document.getElementById("default_btn").style.display="none";document.getElementById("default_btn1").style.display="none"}UpdateSubStreamNetChnnelStatus();if(g_net_ch_num>0){b.style.display="none"}Align()}function LoadDefaultCfgNetStream(){if(GetDefaultCfg(net_stream_array)){var l=/msie/i.test(navigator.userAgent);var k=document.getElementById("remain_source");UpdateNetStreamCfg(true);var d=document.getElementsByName("net_resolution");var c=document.getElementsByName("net_frame_rate");var g=document.getElementsByName("net_video_quality");for(var f=0;f<g_local_ch_num+g_net_ch_num;f++){OnNetChangeResolution(d[f],f,true)}OnAllNetChangeResolution(document.getElementById("all_net_resolution"));var j=(g_videoFormat=="PAL")?g_avNetStreamInfo.defaultChnnRateNumPal:g_avNetStreamInfo.defaultChnnRateNumNtsc;document.getElementById("all_net_frame_rate").value=j;UpdateNetStreamCfg(true);OnNetStreamCheckAll();var e=parseInt(const_hardware_ver.split(".")[0],10);if(e==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var f=0;f<c.length;f++){c[f].disabled=false}}g_bChange=true;var h=(g_videoFormat=="PAL")?g_avNetStreamInfo.totalRatePalOnCif:g_avNetStreamInfo.totalRateNtscOnCif;var b=0;if(e==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var a=0;a<c.length;a++){b+=ConvertCifRateForXD_M(parseInt(c[a].value,10),parseInt(d[a].value,10))}}else{for(var a=0;a<c.length;a++){b+=ConvertCifRate(parseInt(c[a].value,10),parseInt(d[a].value,10))}}var n=(h-b);if(l){k.innerText=str_source_remain+": "+n+"(CIF)."}else{k.textContent=str_source_remain+": "+n+"(CIF)."}UpdateSubStreamNetChnnelStatus();Align()}}function OnNetStreamCheckAll(){var l=document.getElementById("net_all_cfg");var b=document.getElementById("id_net_stream_cfg");var h=document.getElementById("id_net_stream_all");var k=document.getElementById("all_net_encode_type");var j=document.getElementById("all_net_video_quality");cfgCopy2All(l,b,h);var n=document.getElementsByName("net_encode_type");var f=document.getElementsByName("net_video_quality");if(l.checked){OnNetChangeEncodeType(k,j)}else{for(var e=0;e<g_local_ch_num+g_net_ch_num;e++){OnNetChangeEncodeType(n[e],f[e])}}var d=document.getElementsByName("net_resolution");var a=document.getElementsByName("net_frame_rate");if(g_minorEncodeSizeAllCh){for(var g=0;g<d.length;g++){d[g].disabled=true}}if(!g_supportFunctions.IsSupportLocalSubStreamConfig()){for(var e=0;e<g_local_ch_num;e++){a[e].disabled=true}}if(l.checked){for(var e=0;e<a.length;e++){a[e].disabled=true}}if(!l.checked){var c=parseInt(const_hardware_ver.split(".")[0],10);if(c==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var e=0;e<a.length;e++){a[e].disabled=false}}}UpdateSubStreamNetChnnelStatus()}function OnNetChangeResolution(t,g,h){var a=document.getElementsByName("net_resolution");var q=document.getElementsByName("net_frame_rate");var s=document.getElementsByName("net_maxbit_stream");if(g<g_local_ch_num&&g_supportFunctions.IsSupportLocalSubStreamConfig()){var u=g_minorLocalChannelEncodeProperty[g].encInfo;if(!u){return}for(var n=0;n<u.length;n++){var j=u[n].defBitrate;var m=u[n].Rate;if((u[n].channel==g)&&(u[n].videoSize==a[g].value)){var d=[];for(var o=0;o<g_avNetStreamInfo.supportBitrate.length;o++){if(g_avNetStreamInfo.supportBitrate[o].optionValue>j){break}d.push(new CSelectOptionInfo(g_avNetStreamInfo.supportBitrate[o].optionName,g_avNetStreamInfo.supportBitrate[o].optionValue))}GenSelectListEx(s[g],d);if(!h){s[g].value=u[n].defBitrate}break}}if(!h){CheckSecondStreamConfigParams(g);return}}if((g_net_ch_num>0)&&((g-g_local_ch_num)>=0)){var u=g_majorNetChannelEncodeProperty[g-g_local_ch_num].encInfo;if(!u){return}for(var n=0;n<u.length;n++){var j=u[n].maxBitRate;var m=u[n].Rate;if((u[n].channel==g)&&(u[n].videoSize==a[g].value)){var d=[];for(var o=0;o<g_avNetStreamInfo.supportBitrate.length;o++){if(g_avNetStreamInfo.supportBitrate[o].optionValue>j){break}d.push(new CSelectOptionInfo(g_avNetStreamInfo.supportBitrate[o].optionName,g_avNetStreamInfo.supportBitrate[o].optionValue))}GenSelectListEx(s[g],d);s[g].value=GetDefaultBiteRate(u[t.selectedIndex].videoSize,false);break}}}var e=q[g].options.length;var b=parseInt(q[g].value,10);var f=g;if(g_majorEncodeProperty.length==1){f=0}var c=0;for(var p=0;p<g_majorEncodeProperty[f].length;p++){if(g_majorEncodeProperty[f][p].resolution==a[g].value){c=p;break}}GenSelectListEx(q[g],g_majorEncodeProperty[f][c].frameRate);if((g_net_ch_num>0)&&((g-g_local_ch_num)>=0)){if(m>g_majorEncodeProperty[f][c].frameRate.length){m=g_majorEncodeProperty[f][c].frameRate.length}else{q[g].length=m}q[g].value=m}else{if(!g_supportFunctions.IsSupportLocalSubStreamConfig()){var r=g_majorEncodeProperty[f][c].frameRate.length;q[g].value=Math.round(b*r/e)}else{var u=g_minorLocalChannelEncodeProperty[g].encInfo;if(!u){return}for(var n=0;n<u.length;n++){var j=u[n].defBitrate;var m=u[n].Rate;if((u[n].channel==g)&&(u[n].videoSize==a[g].value)){var d=[];for(var o=0;o<g_avNetStreamInfo.supportBitrate.length;o++){if(g_avNetStreamInfo.supportBitrate[o].optionValue>j){break}d.push(new CSelectOptionInfo(g_avNetStreamInfo.supportBitrate[o].optionName,g_avNetStreamInfo.supportBitrate[o].optionValue))}GenSelectListEx(s[g],d);break}}}}TryNetFrameRate(g,h);return;if(g_minorEncodeProperty[t.selectedIndex].resolution==64){s[g].value=1536}if(g_minorEncodeProperty[t.selectedIndex].resolution==32){s[g].value=2048}if(g_minorEncodeProperty[t.selectedIndex].resolution==16){s[g].value=4096}if(g_minorEncodeProperty[t.selectedIndex].resolution==8){s[g].value=1024}if(g_minorEncodeProperty[t.selectedIndex].resolution==4){s[g].value=1024}if(g_minorEncodeProperty[t.selectedIndex].resolution==2){s[g].value=768}}function OnAllNetChangeResolution(f){var a=document.getElementById("all_net_frame_rate");var e=document.getElementById("all_net_maxbit_stream");var c=a.options.length;var j=parseInt(a.value,10);var b=g_minorEncodeProperty[f.selectedIndex].frameRate;var h=new Array();var d=parseInt(const_hardware_ver.split(".")[0],10);for(var g=0;g<b.length;g++){h[g]=new CSelectOptionInfo(b[g].optionName,b[g].optionValue)}GenSelectListEx(a,h);var k=b.length;a.value=Math.round(j*k/c);TryAllNetFrame();if(g_minorEncodeProperty[f.selectedIndex].resolution==64){e.value=1536}if(g_minorEncodeProperty[f.selectedIndex].resolution==32){e.value=2048}if(g_minorEncodeProperty[f.selectedIndex].resolution==16){e.value=4096}if(g_minorEncodeProperty[f.selectedIndex].resolution==8){e.value=1024}if(g_minorEncodeProperty[f.selectedIndex].resolution==4){e.value=1024}if(g_minorEncodeProperty[f.selectedIndex].resolution==2){if(d==TD_2308ME_C||d==TD_2308SS_SDI){e.value=512}else{e.value=g_avNetStreamInfo.defaultBitrate}}}function OnNetChangeEncodeType(a,b){if(a.value==1){b.disabled=false}else{if(a.value==2){b.disabled=true}}if(a.parentNode.style.display=="none"){b.disabled=false}}function TryNetFrameRate(f,l){if(f>=g_local_ch_num){return}else{if(!l&&g_supportFunctions.IsSupportLocalSubStreamConfig()){CheckSecondStreamConfigParams(f);return}}var j=/msie/i.test(navigator.userAgent);var h=document.getElementById("remain_source");var g=(g_videoFormat=="PAL")?g_avNetStreamInfo.totalRatePalOnCif:g_avNetStreamInfo.totalRateNtscOnCif;var b=0;var e=document.getElementsByName("net_resolution");var c=document.getElementsByName("net_frame_rate");var d=parseInt(const_hardware_ver.split(".")[0],10);if(d==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var a=0;a<c.length;a++){b+=ConvertCifRateForXD_M(parseInt(c[a].value,10),parseInt(e[a].value,10))}}else{for(var a=0;a<c.length;a++){b+=ConvertCifRate(parseInt(c[a].value,10),parseInt(e[a].value,10))}}if(b>g){window.alert(str_total_frame_rate_exceed);if(d==TD_2716XD_M&&g_minorEncodeProperty.length>1){c[f].value=parseInt(c[f].value)-Math.ceil((b-g)/MultiCifForXD_M(e[f].value))}else{c[f].value=parseInt(c[f].value)-Math.ceil((b-g)/MultiCif(e[f].value))}}b=0;if(d==TD_2716XD_M&&g_minorEncodeProperty.length>1){for(var a=0;a<c.length;a++){b+=ConvertCifRateForXD_M(parseInt(c[a].value,10),parseInt(e[a].value,10))}}else{for(var a=0;a<c.length;a++){if(a>=g_local_ch_num){continue}b+=ConvertCifRate(parseInt(c[a].value,10),parseInt(e[a].value,10))}}var k=(g-b);if(j){h.innerText=str_source_remain+": "+k+"(CIF)."}else{h.textContent=str_source_remain+": "+k+"(CIF)."}}function TryAllNetFrame(){var j=/msie/i.test(navigator.userAgent);var h=document.getElementById("remain_source");var c=document.getElementsByName("net_frame_rate");var a=document.getElementById("all_net_frame_rate");var e=document.getElementById("all_net_resolution");var f=parseInt(const_hardware_ver.split(".")[0],10);var g=(g_videoFormat=="PAL")?g_avNetStreamInfo.totalRatePalOnCif:g_avNetStreamInfo.totalRateNtscOnCif;var b=0;var d=c.length;if(g_local_ch_num>0&&g_net_ch_num>0){d=g_local_ch_num}if(f==TD_2716XD_M&&g_minorEncodeProperty.length>1){b=c.length*ConvertCifRateForXD_M(parseInt(a.value,10),parseInt(e.value,10))}else{b=d*ConvertCifRate(parseInt(a.value,10),parseInt(e.value,10))}if(b>g){window.alert(str_total_frame_rate_exceed);if(f==TD_2716XD_M&&g_minorEncodeProperty.length>1){a.value=Math.floor(g/d/MultiCifForXD_M(e.value))}else{a.value=Math.floor(g/d/MultiCif(e.value))}}if(f==TD_2716XD_M&&g_minorEncodeProperty.length>1){b=d*ConvertCifRateForXD_M(parseInt(a.value,10),parseInt(e.value,10))}else{b=d*ConvertCifRate(parseInt(a.value,10),parseInt(e.value,10))}var k=(g-b);if(j){h.innerText=str_source_remain+": "+k+"(CIF)."}else{h.textContent=str_source_remain+": "+k+"(CIF)."}}function UpdateNetwork(A){var h=document.getElementsByName("ip_type");var F=document.getElementsByName("ipv6_type");var o=document.getElementById("ip_address");var q=document.getElementById("net_mask");var w=document.getElementById("gate_way");var D=document.getElementById("ipv6_address");var f=document.getElementById("ipv6_net_mask");var g=document.getElementById("ipv6_gateway");var u=document.getElementById("ddns_domain_info");var n=document.getElementById("ddns_register_btn");var j=document.getElementById("ddns_type");var I=document.getElementById("ddns_username");var B=document.getElementById("ddns_password");var u=document.getElementById("ddns_domain_info");var t=document.getElementById("ipv4_enable");var s=document.getElementById("ipv6_enable");var p=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");for(var y=0;y<p.length;y++){var m=p[y].getAttribute("name");if(m==STR_USEIPV4V6){var d=p[y].childNodes[0].nodeValue.split("+");if(A){if(d[0]=="1"){t.checked=true}if(d[1]=="1"){s.checked=true}}else{if(t.checked){d[0]="1"}else{d[0]="0"}if(s.checked){d[1]="1"}else{d[1]="0"}p[y].childNodes[0].nodeValue=d.join("+")}}else{if(m==STR_NETWORK){var d=p[y].childNodes[0].nodeValue.split("+");if(A){for(var x=0;x<h.length;x++){if(h[x].value==d[0]){h[x].checked=true;break}}MultiEdit.all[o.ipName].setValue(d[1]);MultiEdit.all[q.ipName].setValue(d[2]);MultiEdit.all[w.ipName].setValue(d[3])}else{for(var x=0;x<h.length;x++){if(h[x].checked){d[0]=h[x].value;break}}d[1]=MultiEdit.all[o.ipName].getValue();d[2]=MultiEdit.all[q.ipName].getValue();d[3]=MultiEdit.all[w.ipName].getValue();p[y].childNodes[0].nodeValue=d.join("+")}}else{if(m==STR_IPV6_NETWORK){var d=p[y].childNodes[0].nodeValue.split("+");if(A){for(var x=0;x<F.length;x++){if(F[x].value==d[0]){F[x].checked=true;break}}MultiEdit.all[D.ipName].setValue(d[1]);MultiEdit.all[f.ipName].setValue(d[2]);MultiEdit.all[g.ipName].setValue(d[3])}else{for(var x=0;x<F.length;x++){if(F[x].checked){d[0]=F[x].value;break}}d[1]=MultiEdit.all[D.ipName].getValue();d[2]=MultiEdit.all[f.ipName].getValue();d[3]=MultiEdit.all[g.ipName].getValue();p[y].childNodes[0].nodeValue=d.join("+")}}else{if(m==STR_DDNS_INFO){var b=p[y].childNodes[0].nodeValue;var c=parseInt(b,10);b=b.substr(b.indexOf("+")+1);var z=parseInt(b,10);b=b.substr(b.indexOf("+")+1);var e=parseInt(b,10);b=b.substr(b.indexOf("+")+1);var E=parseInt(b,10);b=b.substr(b.indexOf(":")+1);var H=b.SubStringOfBytes(0,E);b=b.substr(H.length+1);var v=parseInt(b,10);b=b.substr(b.indexOf(":")+1);var a=b.SubStringOfBytes(0,v);b=b.substr(a.length);var G="";var l=1;for(var C=0;C<j.length;C++){if(g_ddnsDomainInfo[C].ddnsId==e){l=g_ddnsDomainInfo[C].hasDomain}}if(l){b=b.substr(b.indexOf("+")+1);var r=parseInt(b,10);b=b.substr(b.indexOf(":")+1);G=b.substr(0,r)}if(A){document.getElementsByName("ddns_enable")[0].checked=c;if(e==12){document.getElementsByName("ddns_email")[0].value=H;u.value=G}else{I.value=H;B.value=a;u.value=(l?G:"")}j.value=e.toString()}else{c=(document.getElementsByName("ddns_enable")[0].checked?"1":"0");e=j.value;if(n.style.display=="none"){H=I.value;a=B.value;G=u.value;z=((G=="")?"0":"1");b=c+"+"+z+"+"+e+"+"+H.size()+":"+H+"+"+a.size()+":"+a;if(z){b+="+"+G.size()+":"+G}}else{H=document.getElementsByName("ddns_email")[0].value;G=u.value;z=1;b=c+"+"+z+"+"+e+"+"+H.size()+":"+H+"+"+0+":+"+G.size()+":"+G}p[y].childNodes[0].nodeValue=b}}else{if(m==STR_PPPOE_INFO){var b=p[y].childNodes[0].nodeValue;var c=parseInt(b,10);b=b.substr(b.indexOf("+")+1);var E=parseInt(b,10);b=b.substr(b.indexOf(":")+1);var H=b.SubStringOfBytes(0,E);b=b.substr(H.length+1);var v=parseInt(b,10);b=b.substr(b.indexOf(":")+1);var a=b.SubStringOfBytes(0,v);if(A){document.getElementsByName("pppoe_enable")[0].checked=c;document.getElementsByName("pppoe_username")[0].value=H;document.getElementsByName("pppoe_password")[0].value=a}else{c=(document.getElementsByName("pppoe_enable")[0].checked?"1":"0");H=document.getElementsByName("pppoe_username")[0].value;a=document.getElementsByName("pppoe_password")[0].value;b=c+"+"+H.size()+":"+H+"+"+a.size()+":"+a;p[y].childNodes[0].nodeValue=b}}}}}}}}function UpdateWirelessNetwork(b){var n=document.getElementById("wireless_enable");var m=document.getElementById("wireless_type");var a=document.getElementById("connect_point");var c=document.getElementById("wireless_apn");var e=document.getElementById("wireless_usename");var j=document.getElementById("wireless_password");var g=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");for(i=0;i<g.length;i++){if(g[i].getAttribute("name")==STR_NET_WIRELESS_NETWORK){if(b){var l=g[i].firstChild.nodeValue.split("+");n.checked=l[0]=="1"?true:false;m.value=l[1];a.value=l[2];c.value=l[3];e.value=l[4];j.value=l[5]}else{var l=new Array();l[0]=n.checked?"1":"0";l[1]=m.value;var h=a.value;var d=c.value;var f=e.value;var k=j.value;l[2]=h.size()+":"+h;l[3]=d.size()+":"+d;l[4]=f.size()+":"+f;l[5]=k.size()+":"+k;g[i].firstChild.nodeValue=l.join("+")}}else{if(g[i].getAttribute("name")==STR_USE_3G){g_networkType=g[i].childNodes[0].nodeValue}}}}function UpdateAutoReport(f){var c=document.getElementById("server_check");var b=document.getElementById("server_addr");var h=document.getElementById("server_port");var e=document.getElementById("server_deviceID");var d=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");for(i=0;i<d.length;i++){if(d[i].getAttribute("name")==STR_NET_AUTO_REPORT){if(f){var a=d[i].firstChild.nodeValue.split("+");c.checked=a[0]=="1"?true:false;b.value=a[2];h.value=a[1];e.value=a[3]}else{var a=new Array();a[0]=c.checked?"1":"0";a[1]=h.value;a[2]=e.value;var g=b.value;a[3]=g.size()+":"+g;d[i].firstChild.nodeValue=a.join("+")}}}}function Oncheckbox(){var a=document.getElementById("nat_check");var c=document.getElementById("nat_addr");var b=document.getElementById("nat_port");if(a.checked==true){c.disabled=true;b.disabled=true}else{c.disabled=true;b.disabled=true}if((a.checked==true)&&g_bNATOpenNeedCheck==true){if(confirm(net_nat_checkbox)){a.checked=true;g_bNATOpenNeedCheck=false}else{a.checked=false}}}function UpdateNATConfigInfo(d){var b=document.getElementById("nat_check");var f=document.getElementById("nat_addr");var e=document.getElementById("nat_port");var g=document.getElementById("nat_deviceID");var c=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");for(i=0;i<c.length;i++){if(c[i].getAttribute("name")==STR_NAT_INFO){if(d){var a=c[i].firstChild.nodeValue.split("+");b.checked=a[0]=="1"?true:false;f.value=a[2];e.value=a[1];f.disabled=!(b.checked);e.disabled=!(b.checked)}else{var a=new Array();a[0]=b.checked?"1":"0";a[1]=e.value;a[2]=f.value;c[i].firstChild.nodeValue=a.join("+")}}}f.disabled=true}function UpdateNetStreamCfg(g){var e=document.getElementsByName("net_resolution");var r=document.getElementsByName("net_encode_type");var k=document.getElementsByName("net_video_quality");var c=document.getElementsByName("net_maxbit_stream");var b=document.getElementsByName("net_frame_rate");var q=document.getElementById("net_all_cfg");var d=document.getElementById("all_net_resolution");var p=document.getElementById("all_net_encode_type");var f=document.getElementById("all_net_maxbit_stream");var n=document.getElementById("all_net_video_quality");var a=document.getElementById("all_net_frame_rate");var m=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");for(var l=0;l<m.length;l++){if(m[l].getAttribute("name")==STR_ENCODE_MINOR_EX){if(g){for(var h=0;h<g_local_ch_num+g_net_ch_num;h++){var o=m[l].childNodes[0].nodeValue.split("+");e[h].value=o[0];if(e[h].selectedIndex==-1){e[h].value=e[h].options[0].value}if(b[h].options.length>0){b[h].value=Math.min(parseInt(o[1],10),parseInt((b[h][b[h].options.length-1].value),10))}r[h].value=o[2];k[h].value=o[3];c[h].value=o[5];l++}l--}else{var o=m[l].childNodes[0].nodeValue.split("+");for(var h=0;h<g_local_ch_num+g_net_ch_num;h++){if(q.checked){if(IL03&&(h>=g_local_ch_num)){l++;continue}o[0]=d.value;o[1]=a.value;o[2]=p.value;o[3]=n.value;o[5]=f.value}else{if((h>=g_local_ch_num)&&(g_majorNetChannelEncodeProperty[h-g_local_ch_num].online!=1)){l++;continue}o[0]=e[h].value;o[1]=b[h].value;o[2]=r[h].value;o[3]=k[h].value;o[5]=c[h].value}m[l].childNodes[0].nodeValue=o.join("+");l++}l--}}}}function CreateSubStreamLocalChannel(c,h){if(c>g_local_ch_num){return}if(g_supportFunctions.IsSupportLocalSubStreamConfig()){var l=document.getElementsByName("net_frame_rate");var f=document.getElementsByName("net_maxbit_stream");var a=document.getElementsByName("net_resolution");var g=new Array(0);var m=new Array(0);var b=parseInt(const_hardware_ver.split(".")[0],10);var k=g_minorLocalChannelEncodeProperty[c].encInfo;for(var d=0;d<k.length;d++){var e=GetSelcetionsString(g_minorLocalChannelEncodeProperty[c].encInfo[d].videoSize);g.push(new CSelectOptionInfo(e,g_minorLocalChannelEncodeProperty[c].encInfo[d].videoSize))}GenSelectListEx(document.getElementsByName("net_resolution")[c],g);GenSelectListEx(document.getElementsByName("net_encode_type")[c],g_avStreamInfo.supportEncodeMode);GenSelectListEx(document.getElementsByName("net_video_quality")[c],g_avStreamInfo.supportQuarlity);GenSelectListEx(document.getElementsByName("net_maxbit_stream")[c],g_avStreamInfo.supportBitrate)}else{GenSelectListEx(document.getElementsByName("net_resolution")[c],g_minorEncodeProperty);GenSelectListEx(document.getElementsByName("net_encode_type")[c],g_avNetStreamInfo.supportEncodeMode);GenSelectListEx(document.getElementsByName("net_video_quality")[c],g_avNetStreamInfo.supportQuarlity);GenSelectListEx(document.getElementsByName("net_maxbit_stream")[c],GetsuitableBiteRate(g_avNetStreamInfo.defaultResolution,false))}}function CreateListNet(c,m){var v=document.getElementById("all_net_resolution");var f=document.getElementById("all_net_encode_type");var y=document.getElementById("all_net_maxbit_stream");var d=document.getElementById("all_net_video_quality");var o=document.getElementById("all_net_frame_rate");var u=document.getElementsByName("net_frame_rate");var q=/msie/i.test(navigator.userAgent);var n=c.outerHTML.toLowerCase();var t=n.indexOf("</tbody>");n=n.substr(0,t);var k=6;var x=Math.round(633/(k-1));if(!g_supportMinorEncTypeAndBitrate){x=Math.round(633/(k-3))}n+="<tr class = 'table_head_bgcolor'>";for(var s=0;s<k;s++){if(!g_supportMinorEncTypeAndBitrate&&((3==s)||(5==s))){n+='<td style = "width:'+x+'px;text-align:center;display:none;">'+cfg_netstream_header[s]+"</td>"}else{n+='<td style = "width:'+x+'px;text-align:center">'+cfg_netstream_header[s]+"</td>"}}n+="</tr>";for(var s=1;s<m+1;s++){n+="<tr>";n+='<td style = "width:50px;text-align:center">'+s+"</td>";n+='<td><select name = "net_resolution" style = "width:'+x+'px;" onchange = "g_bChange = true; OnNetChangeResolution(this, '+(s-1)+', false)"></select></td>';n+='<td><select name = "net_frame_rate" style = "width:'+x+'px;" onchange = "g_bChange = true; TryNetFrameRate('+(s-1)+', false)"></select></td>';if(!g_supportMinorEncTypeAndBitrate){n+='<td style="display:none;"><select name = "net_encode_type"></select></td>'}else{var g=document.getElementsByName("net_video_quality");n+='<td><select name = "net_encode_type" style = "width:'+x+"px;\" onchange = \"g_bChange = true; var net_video_quality_element = document.getElementsByName('net_video_quality');OnNetChangeEncodeType(this,net_video_quality_element["+(s-1)+'])"></select></td>'}n+='<td><select name = "net_video_quality" style = "width:'+x+'px;" onchange = "g_bChange = true;"></select></td>';if(!g_supportMinorEncTypeAndBitrate){n+='<td style="display:none;"><select name = "net_maxbit_stream"></select></td>'}else{n+='<td><select name = "net_maxbit_stream" style = "width:'+x+'px;" onchange = "g_bChange = true;"></select></td>'}n+="</tr>"}n+="</tbody></table>";if(q){var l=c.parentElement}else{var l=c.parentNode}l.innerHTML=n;var e=new Array(new CSelectOptionInfo(str_cbr,2));for(var s=1;s<m+1;s++){if(s>0&&s<=g_local_ch_num){CreateSubStreamLocalChannel(s-1,e)}else{if(s>g_local_ch_num&&s<=g_local_ch_num+g_net_ch_num){var w=new Array(0);var b=new Array(0);var a=new Array(0);if(g_majorNetChannelEncodeProperty[s-g_local_ch_num-1].online==1){var p=g_majorNetChannelEncodeProperty[s-g_local_ch_num-1].encInfo;for(var r=0;r<g_majorNetChannelEncodeProperty[s-g_local_ch_num-1].encInfo.length;r++){var h=GetSelcetionsString(g_majorNetChannelEncodeProperty[s-g_local_ch_num-1].encInfo[r].videoSize);w.push(new CSelectOptionInfo(h,g_majorNetChannelEncodeProperty[s-g_local_ch_num-1].encInfo[r].videoSize))}}else{w.push(new CSelectOptionInfo("",0))}GenSelectListEx(document.getElementsByName("net_resolution")[s-1],w);GenSelectListEx(document.getElementsByName("net_encode_type")[s-1],e);GenSelectListEx(document.getElementsByName("net_video_quality")[s-1],g_avStreamInfo.supportQuarlity);GenSelectListEx(document.getElementsByName("net_maxbit_stream")[s-1],g_avNetStreamInfo.supportBitrate)}}}c=l.childNodes[0];v.style.width=x+"px";o.style.width=x+"px";f.style.width=x+"px";d.style.width=x+"px";y.style.width=x+"px";if(!g_supportMinorEncTypeAndBitrate){f.parentNode.style.display="none";y.parentNode.style.display="none"}}function ConstNetConfiglen(){var m="";var l="";var j="";var h="";var g="";var f="";var d="";pppoe_username_len=document.getElementsByName("pppoe_username")[0].value.length;pppoe_password_len=document.getElementsByName("pppoe_password")[0].value.length;ddns_username_len=document.getElementById("ddns_username").value.length;ddns_password_len=document.getElementById("ddns_password").value.length;ddns_domain_info_len=document.getElementById("ddns_domain_info").value.length;var n=document.getElementById("netconfig_errortips");var p=document.getElementById("id_pppoe_username");var e=document.getElementById("id_pppoe_password");var c=document.getElementById("id_ddns_username");var o=document.getElementById("id_ddns_password");var a=document.getElementById("id_ddns_domain_info");var k=document.getElementById("http_port");var b=document.getElementById("server_port");var q=true;if(pppoe_username_len>const_pppoe_username_max_len){l="<br>PPPoE "+p.innerHTML+cannot_more_than_tip+const_pppoe_username_max_len+"!";q=false}if(pppoe_password_len>const_pppoe_password_max_len){j="<br>PPPoE "+e.innerHTML+cannot_more_than_tip+const_pppoe_password_max_len+"!";q=false}if(ddns_username_len>const_ddns_uername_max_len){h="<br>DDNS "+c.innerHTML+cannot_more_than_tip+const_ddns_uername_max_len+"!";q=false}if(ddns_password_len>const_ddns_password_max_len){g="<br>DDNS "+o.innerHTML+cannot_more_than_tip+const_ddns_password_max_len+"!";q=false}if(ddns_domain_info_len>const_ddns_domain_max_len){f="<br>"+a.innerHTML+cannot_more_than_tip+const_ddns_domain_max_len+"!";q=false}if(k.value==b.value){d="<br>"+str_http_data_port_conflict;q=false}if(!q){n.style.color="red";n.innerHTML=save_error_tip+l+j+h+g+f+d;return false}n.innerHTML="";n.display="none";return true}function UpnpEnable(b){var a=document.getElementsByName("upnp_name");a[0].disabled=!b.checked}function IPType(){var a=document.getElementsByName("ip_type");var d=document.getElementsByName("ip_address");d[0].disabled=a[0].checked;var f=document.getElementsByName("net_mask");f[0].disabled=a[0].checked;var b=document.getElementsByName("gate_way");b[0].disabled=a[0].checked;var e=document.getElementsByName("net_dns1");e[0].disabled=a[0].checked;var c=document.getElementsByName("net_dns2");c[0].disabled=a[0].checked}function IPAuto(a){if(a.checked){MultiEdit.all.ip1.setEnable(false);MultiEdit.all.ip2.setEnable(false);MultiEdit.all.ip3.setEnable(false)}}function IPV6Auto(a){if(a.checked){MultiEdit.all.ipv6_1.setEnable(false);MultiEdit.all.ipv6_2.setEnable(false);MultiEdit.all.ipv6_3.setEnable(false)}}function IPStatic(a){if(a.checked){MultiEdit.all.ip1.setEnable(true);MultiEdit.all.ip2.setEnable(true);MultiEdit.all.ip3.setEnable(true)}}function IPV6Static(a){if(a.checked){MultiEdit.all.ipv6_1.setEnable(true);MultiEdit.all.ipv6_2.setEnable(true);MultiEdit.all.ipv6_3.setEnable(true)}}function PPPoeEnable(e){var b=document.getElementsByName("ip_type");var c=document.getElementsByName("ipv6_type");var d=document.getElementsByName("pppoe_username");d[0].disabled=!e.checked;var a=document.getElementsByName("pppoe_password");a[0].disabled=!e.checked;if(e.checked){b[0].disabled=true;b[1].disabled=true;c[0].disabled=true;c[1].disabled=true;MultiEdit.all.ip1.setEnable(false);MultiEdit.all.ip2.setEnable(false);MultiEdit.all.ip3.setEnable(false);MultiEdit.all.ipv6_1.setEnable(false);MultiEdit.all.ipv6_2.setEnable(false);MultiEdit.all.ipv6_3.setEnable(false)}else{b[0].disabled=false;b[1].disabled=false;c[0].disabled=false;c[1].disabled=false;IPStatic(b[1]);IPV6Static(c[1])}}function DdnsEnable(g){var f=document.getElementById("ddns_type");var e=document.getElementById("ddns_username");var h=document.getElementById("ddns_password");var d=document.getElementById("ddns_domain_info");var b=document.getElementById("ddns_update_cycle");var a=document.getElementById("ddns_test_btn");var a=document.getElementById("ddns_test_btn");var c=document.getElementById("ddns_server_name");f.disabled=!g.checked;e.disabled=!g.checked;h.disabled=!g.checked;d.disabled=!g.checked;b.disabled=!g.checked;a.disabled=!g.checked;if(g.checked){a.style.color=btn_text_normal_color}else{a.style.color=btn_text_disabled_color}c.disabled=!g.checked;document.getElementsByName("ddns_email")[0].disabled=!g.checked;document.getElementById("ddns_register_btn").disabled=!g.checked;document.getElementById("ddns_delete_btn").disabled=!g.checked;if(g.checked){ShowUserSuffix(f);DisServerName(f);DisDomain(f);DisUpdateCycle(f)}Align()}function FilterIpIf(b){var a=document.getElementsByName("filter_ip_mode");a[0].disabled=!b.checked;a[1].disabled=!b.checked}function DisUpdateCycle(c){var a=document.getElementById("ddns_update_tr");var b=document.getElementById("ddns_type");for(i=0;i<b.length;i++){if(c.options[i].selected){if(g_ddnsDomainInfo[i].ddnsId=="4"||(g_bBR27&&(g_ddnsDomainInfo[i].ddnsId=="15"||g_ddnsDomainInfo[i].ddnsId=="16"))){a.style.display="none"}else{if(g_ddnsDomainInfo[i].ddnsId=="17"){a.style.display="none"}else{a.style.display=""}}}}}function ShowUserSuffix(d){var a=document.getElementById("br27ddns");var c=document.getElementById("br27TecvozDDNS");var b=document.getElementById("ddns_username");var e=document.getElementById("ddns_password");for(i=0;i<ddns_type.length;i++){if(d.options[i].selected){if(g_ddnsDomainInfo[i].ddnsId=="16"){a.style.display="";b.style.width="350px";e.style.width="350px";c.style.display="none"}else{if(g_ddnsDomainInfo[i].ddnsId=="15"){a.style.display="none";c.style.display="";b.style.width="300px";e.style.width="300px"}else{a.style.display="none";c.style.display="none";b.style.width="437px";e.style.width="437px"}}}}}function DisServerName(d){var a=document.getElementsByName("ddns_enable");var c=document.getElementById("ddns_type");var b=document.getElementById("ddns_server_name_tr");for(i=0;i<c.length;i++){if(d.options[i].selected){if(g_ddnsDomainInfo[i].ddnsId=="7"){b.style.display=""}else{b.style.display="none"}}}}function DisDomain(f){ApplyXmlLang("cfg_net.xml");var g=/msie/i.test(navigator.userAgent);var c=document.getElementById("ddns_domain_tr");var a=document.getElementById("ddns_update_tr");var k=document.getElementById("ddns_domain_info");var p=document.getElementById("ddns_test_btn");var j=document.getElementById("ddns_username_tr");var h=document.getElementById("ddns_pwd_tr");var b=document.getElementById("ddns_email_tr");var o=document.getElementById("visionico_info");var n=document.getElementById("ddns_type");var e=document.getElementById("br27ddnsdomain");var m=document.getElementById("autoddnsdomain");var d=parseInt(const_hardware_ver.split(".")[1],10);e.style.display="none";m.style.display="none";j.style.display="";h.style.display="";document.getElementById("ddns_delete_btn").style.display="none";var l=document.getElementsByName("ddns_enable");for(i=0;i<n.length;i++){if(f.options[i].selected){if(g_bBR27&&g_ddnsDomainInfo[i].ddnsId=="15"){c.style.display="none";a.style.display="none";b.style.display="none";document.getElementById("ddns_register_btn").style.display="none";if(g_langName=="portuguese"){if(g){id_ddns_username.innerText="Subdomínio"}else{id_ddns_username.textContent="Subdomínio"}}}else{if(g_ddnsDomainInfo[i].hasDomain=="1"){if(l[0].checked){c.style.display="";a.style.display="";k.disabled=false;p.disabled=false}if(g_ddnsDomainInfo[i].ddnsId=="12"){p.style.display="none";c.style.display="";a.style.display="";document.getElementById("ddns_register_btn").style.display="";j.style.display="none";h.style.display="none";b.style.display="";o.style.display="";k.disabled=true;k.style.width="350px";k.value=g_deviceMac.replace(/-/ig,"")}else{if(g_ddnsDomainInfo[i].ddnsId=="17"){j.style.display="none";h.style.display="none";document.getElementById("ddns_register_btn").style.display="";p.style.display="none";m.style.display="";a.style.display="none";if(d==8){document.getElementById("ddns_delete_btn").style.display="";m.innerHTML=".cpplusddns.com"}o.style.display="none";b.style.display="none";k.style.width="350px"}else{if(g_ddnsDomainInfo[i].ddnsId=="16"){c.style.display="";a.style.display="";b.style.display="none";document.getElementById("ddns_register_btn").style.display="none";e.style.display="";o.style.display="none";k.style.width="350px"}else{p.style.display="";c.style.display="";a.style.display="";document.getElementById("ddns_register_btn").style.display="none";j.style.display="";h.style.display="";b.style.display="none";o.style.display="none";k.style.width="437px"}}}}else{p.style.display="";j.style.display="";h.style.display="";c.style.display="";a.style.display="";document.getElementById("ddns_register_btn").style.display="none";b.style.display="none";o.style.display="none";k.style.width="437px";k.disabled=true;if(g_ddnsDomainInfo[i].ddnsId=="0"){p.disabled=true}else{if(g_ddnsDomainInfo[i].ddnsId=="13"){j.style.display="";h.style.display="none";c.style.display="none";a.style.display="none";if(g){id_ddns_username.innerText=str_ddns_ip_server}else{id_ddns_username.textContent=str_ddns_ip_server}}else{p.disabled=false}}}}}}}function NetworkTestDHCP(){var d=document.getElementsByName("ip_type");var c=new Array();for(var b=0;b<d.length;b++){if(d[b].checked){c[0]=d[b].value;break}}c[1]=MultiEdit.all[ip_address.ipName].getValue();c[2]=MultiEdit.all[net_mask.ipName].getValue();c[3]=MultiEdit.all[gate_way.ipName].getValue();var f="<request>";f+='<command name="'+STR_NETWORK_TEST_DHCP+'">';f+="<parameter>"+c.join("+")+"</parameter>";f+="</command>";f+="</request>";var a=WebClient.ExcuteCmd(f);if(a==""){return}else{xmlDoc=FormatToXmlDOM(a);xmlDoc.async=false;var e=xmlDoc.documentElement.getElementsByTagName("command")[0];if(e.getAttribute("name")==STR_NETWORK_TEST_SUCC){g_bNetworkPassTest=true;window.alert(str_testsuccess)}else{g_bNetworkPassTest=false;window.alert(str_testfailed)}if(xmlDoc!=null){delete xmlDoc;xmlDoc=null}}}function NetworkTestPPPoE(){var d=(document.getElementsByName("pppoe_enable")[0].checked?"1":"0");var b=document.getElementsByName("pppoe_username")[0].value;var c=document.getElementsByName("pppoe_password")[0].value;var g=d+"+"+b.size()+":"+b+"+"+c.size()+":"+c;var f="<request>";f+='<command name="'+STR_NETWORK_TEST_PPPOE+'">';f+="<parameter>"+g+"</parameter>";f+="</command>";f+="</request>";var a=WebClient.ExcuteCmd(f);if(a==""){return}else{xmlDoc=FormatToXmlDOM(a);xmlDoc.async=false;var e=xmlDoc.documentElement.getElementsByTagName("command")[0];if(e.getAttribute("name")==STR_NETWORK_TEST_SUCC){g_bNetworkPassTest=true;window.alert(str_testsuccess)}else{g_bNetworkPassTest=false;window.alert(str_testfailed)}if(xmlDoc!=null){delete xmlDoc;xmlDoc=null}}}function NetworkTest(){if(document.getElementsByName("pppoe_enable")[0].checked){NetworkTestPPPoE()}else{NetworkTestDHCP()}}function NetworkTestDDNS(j){var g=document.getElementById("ddns_type");var k=document.getElementById("ddns_server_name");var t=document.getElementById("ddns_username");var s=document.getElementById("ddns_password");var o=document.getElementById("ddns_domain_info");var c=(document.getElementsByName("ddns_enable")[0].checked?"1":"0");var e=g.value;var b;var p=k.value;var d=str_testsuccess;var l=str_testfailed;if(g_bBR27){var u=t.value;var a=s.value;var v=o.value;var r=((v=="")?"0":"1");b=c+"+"+r+"+"+e+"+"+u.size()+":"+u+"+"+a.size()+":"+a+"+"+p.size()+":"+p;if(r){b+="+"+v.size()+":"+v}}else{if(document.getElementById("ddns_register_btn").style.display=="none"){var u=t.value;var a=s.value;var v=o.value;var r=((v=="")?"0":"1");b=c+"+"+r+"+"+e+"+"+u.size()+":"+u+"+"+a.size()+":"+a+"+"+p.size()+":"+p;if(r){b+="+"+v.size()+":"+v}}else{var u=document.getElementsByName("ddns_email")[0].value;var v=o.value;var r=1;var b=c+"+"+r+"+"+e+"+"+u.size()+":"+u+"+"+1+": +"+p.size()+":"+p+"+"+v.size()+":"+v;d=str_update_ddns_succ;l=str_registerfailed;var n=document.getElementById("autoddnsdomain");var h=parseInt(const_hardware_ver.split(".")[1],10);if((n.style.display!="none")&&(h==8)){if(v.sizeUTF8()<3){if(!j){window.alert(l)}return false}}}}var m="<request>";m+='<command name="'+STR_NETWORK_TEST_DDNS+'">';m+="<parameter>"+b+"</parameter>";m+="</command>";m+="</request>";var q=WebClient.ExcuteCmd(m);if(q==""){return false}else{if(xmlDoc!=null){delete xmlDoc;xmlDoc=null}xmlDoc=FormatToXmlDOM(q);xmlDoc.async=false;var f=xmlDoc.documentElement.getElementsByTagName("command")[0];if(f.getAttribute("name")==STR_NETWORK_TEST_SUCC){g_bDDNSPassTest=true;if(!j){window.alert(d)}return true}else{if(f.getAttribute("name")==STR_NETWORK_CREATE_SUCC){g_bDDNSPassTest=true;if(!j){window.alert(str_registersuccess)}return true}else{if(f.getAttribute("name")==STR_NETWORK_REPLACE_SUCC){g_bDDNSPassTest=true;if(!j){window.alert(str_replacesuccess)}return true}else{if(f.getAttribute("name")==STR_NETWORK_ALREADY_USE){g_bDDNSPassTest=false;if(!j){window.alert(str_domain_name_already_exist)}return false}else{g_bDDNSPassTest=false;if(!j){window.alert(l)}return false}}}}}return false}function DeleteDDNS(){var d="<request>";d+='<command name="'+STR_NETWORK_DELETE_NNDS+'">';d+="</command>";d+="</request>";var a=WebClient.ExcuteCmd(d);if(a==""){return false}else{xmlDoc=FormatToXmlDOM(a);xmlDoc.async=false;var c=xmlDoc.documentElement.getElementsByTagName("command")[0];if(xmlDoc!=null){delete xmlDoc;xmlDoc=null}if(c.getAttribute("name")==STR_NETWORK_DELETE_SUCC){var b=document.getElementById("ddns_domain_info");b.value="";window.alert(str_delete_ddns_succ);return true}else{window.alert(str_delete_ddns_failed);return false}}}function OnLoadCfgMail(){ApplyXmlLang("cfg_net_mail.xml");var b=CreateConfigReqXml(email_config_array);var a=WebClient.ExcuteCmd(b);if(a==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(a);g_xmlDoc.async=false;UpdateNetMail(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true);Align()}function LoadDefaultCfgMail(){if(GetDefaultCfg(email_config_array)){UpdateNetMail(g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter"),true);g_bChange=true}}function UpdateNetMail(q,z){var x=document.getElementsByName("mail_receive_addr");var f=document.getElementById("mail_sll_check");var m=document.getElementById("mail_port");var r=document.getElementById("mail_smtp_server");var n=document.getElementById("mail_send_addr");var w=document.getElementById("mail_send_addr_pwd");var l=document.getElementById("email_pic_acc");for(i=0;i<q.length;i++){if(z){if(STR_EMAIL_SEND_INFO==q[i].attributes.getNamedItem("name").nodeValue){var c=q[i].childNodes[0].nodeValue;bSSL=parseInt(c,10);f.checked=bSSL?true:false;var j=c.indexOf("+");port=c.substr(j+1);m.value=parseInt(port,10);var o=port.indexOf("+");var p=port.substr(o+1);var g=parseInt(p,10);var u=p.indexOf(":");r.value=p.SubStringOfBytes(u+1,g);var y=p.SubStringOfBytes(u+g+1);var s=parseInt(y,10);var d=y.indexOf(":");n.value=y.substr(d+1,s);var k=y.substr(d+s+1);var b=parseInt(k,10);var a=k.indexOf(":");w.value=k.substr(a+1)}if(STR_EMAIL_RECV_INFO==q[i].attributes.getNamedItem("name").nodeValue){var h=q[i].attributes.getNamedItem("index").nodeValue;if(q[i].childNodes[0]==null){x[h].value="";continue}x[h].value=q[i].childNodes[0].nodeValue}if(STR_EMAIL_PIC_ACC==q[i].attributes.getNamedItem("name").nodeValue){var e=q[i].childNodes[0].nodeValue;bSSL=parseInt(e,10);if(bSSL==0){l.checked=false}else{l.checked=true}}}else{if(STR_EMAIL_SEND_INFO==q[i].attributes.getNamedItem("name").nodeValue){q[i].childNodes[0].nodeValue="";var v=(f.checked)?1:0;q[i].childNodes[0].nodeValue=v+"+"+m.value+"+"+r.value.size()+":"+r.value+"+"+n.value.size()+":"+n.value+"+"+w.value.size()+":"+w.value}if(STR_EMAIL_RECV_INFO==q[i].attributes.getNamedItem("name").nodeValue){var h=q[i].attributes.getNamedItem("index").nodeValue;if(q[i].childNodes[0]==null){var t=g_xmlDoc.createTextNode("");q[i].appendChild(t)}q[i].childNodes[0].nodeValue=x[h].value}if(STR_EMAIL_PIC_ACC==q[i].attributes.getNamedItem("name").nodeValue){var v=(l.checked)?1:0;q[i].childNodes[0].nodeValue=v}}}}var g_CheckEmail=0;function CheckEmailNow(){StartWaitTip(str_mail_test_wait_tip);g_CheckEmail=setTimeout("CheckEmail()",100)}function CreateEmailCheckXML(){var c=document.getElementById("mail_sll_check");var g=document.getElementById("mail_port");var a=document.getElementById("mail_smtp_server");var h=document.getElementById("mail_send_addr");var f=document.getElementById("mail_send_addr_pwd");var d="<request>";d+='<command name="'+STR_EMAIL_CHECK+'">';d+="<"+STR_MAIL_SENDER+">";var j=(c.checked)?1:0;d+="<"+STR_USE_SSL+">"+j+"</"+STR_USE_SSL+">";d+="<"+STR_SMTP_PORT+">"+g.value+"</"+STR_SMTP_PORT+">";d+="<"+STR_SMTP_SERVER+">"+a.value+"</"+STR_SMTP_SERVER+">";d+="<"+STR_MAIL_ACCOUNT+">"+h.value+"</"+STR_MAIL_ACCOUNT+">";d+="<"+STR_MAIL_PASSWORD+">"+f.value+"</"+STR_MAIL_PASSWORD+">";d+="</"+STR_MAIL_SENDER+">";d+="<"+STR_MAIL_RECVER+">";var e=document.getElementsByName("mail_receive_addr");for(var b=0;b<e.length;b++){d+="<"+STR_MAIL_ACCOUNT+">"+e[b].value+"</"+STR_MAIL_ACCOUNT+">"}d+="</"+STR_MAIL_RECVER+">";d+="</command>";d+="</request>";return d}function CheckEmail(){var b=CreateEmailCheckXML();var a=WebClient.ExcuteCmd(b);if(a==""){return}var c;c=FormatToXmlDOM(a);c.async=false;var d=c.documentElement.getElementsByTagName("command");delete c;if(d[0].attributes.getNamedItem("name").nodeValue==STR_EMAIL_CHECK_SUCC){StopWaitTip();window.alert(str_mail_test_succ_tip);clearTimeout(g_CheckEmail);return}if(d[0].attributes.getNamedItem("name").nodeValue==STR_EMAIL_CHECK_FAIL){StopWaitTip();window.alert(str_mail_test_fail_tip);clearTimeout(g_CheckEmail);return}StopWaitTip();window.alert(str_mail_test_fail_tip);clearTimeout(g_CheckEmail)}function HostKeyupCheck(d,a){var b=document.getElementById("autoddnsdomain");var c=parseInt(const_hardware_ver.split(".")[1],10);if((b.style.display!="none")&&(c==8)){return KeyupCheckEx(d,16)}else{return KeyupCheck(d,a)}}function ClearInfo(){var b=document.getElementById("ddns_server_name");b.value="";var c=document.getElementById("ddns_username");c.value="";var d=document.getElementById("ddns_password");d.value="";var a=document.getElementById("ddns_domain_info");a.value=""};
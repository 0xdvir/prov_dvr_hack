function CSurportDST(b,a){this.id=b;this.value=a}var surportDSTArr=new Array(new CSurportDST(0,false),new CSurportDST(1,false),new CSurportDST(2,false),new CSurportDST(3,false),new CSurportDST(4,true),new CSurportDST(5,true),new CSurportDST(6,true),new CSurportDST(7,true),new CSurportDST(8,true),new CSurportDST(9,true),new CSurportDST(10,true),new CSurportDST(11,true),new CSurportDST(12,false),new CSurportDST(13,true),new CSurportDST(14,true),new CSurportDST(15,false),new CSurportDST(16,true),new CSurportDST(17,true),new CSurportDST(18,true),new CSurportDST(19,true),new CSurportDST(20,false),new CSurportDST(21,true),new CSurportDST(22,true),new CSurportDST(23,false),new CSurportDST(24,true),new CSurportDST(25,true),new CSurportDST(26,true),new CSurportDST(27,true),new CSurportDST(28,true),new CSurportDST(29,false),new CSurportDST(30,true),new CSurportDST(31,false),new CSurportDST(32,true),new CSurportDST(33,true),new CSurportDST(34,false),new CSurportDST(35,true),new CSurportDST(36,true),new CSurportDST(37,false),new CSurportDST(38,false),new CSurportDST(39,false),new CSurportDST(40,false),new CSurportDST(41,false),new CSurportDST(42,false),new CSurportDST(43,false),new CSurportDST(44,false),new CSurportDST(45,false),new CSurportDST(46,false),new CSurportDST(47,false),new CSurportDST(48,false),new CSurportDST(49,false),new CSurportDST(50,true),new CSurportDST(51,false),new CSurportDST(52,true),new CSurportDST(53,false),new CSurportDST(54,false),new CSurportDST(55,true),new CSurportDST(56,false),new CSurportDST(57,true),new CSurportDST(58,false),new CSurportDST(59,true),new CSurportDST(60,false));var g_timeZone=new Array(new CSelectOptionInfo("GMT-14:00",0),new CSelectOptionInfo("GMT-13:00",1),new CSelectOptionInfo("GMT-12:00  "+str_gmt_w1200,2),new CSelectOptionInfo("GMT-11:00  "+str_gmt_w1100,3),new CSelectOptionInfo("GMT-10:00  "+str_gmt_w1000,4),new CSelectOptionInfo("GMT-9:00  "+str_gmt_w0900,5),new CSelectOptionInfo("GMT-8:00  "+str_gmt_w0800,6),new CSelectOptionInfo("GMT-7:00  "+str_gmt_w0700,7),new CSelectOptionInfo("GMT-6:00  "+str_gmt_w0600_1,8),new CSelectOptionInfo("GMT-6:00  "+str_gmt_w0600_2,9),new CSelectOptionInfo("GMT-5:00  "+str_gmt_w0500_1,10),new CSelectOptionInfo("GMT-5:00  "+str_gmt_w0500_2,11),new CSelectOptionInfo("GMT-4:30  "+str_gmt_w0430,12),new CSelectOptionInfo("GMT-4:00  "+str_gmt_w0400_1,13),new CSelectOptionInfo("GMT-4:00  "+str_gmt_w0400_2,14),new CSelectOptionInfo("GMT-4:00  "+str_gmt_w0400_3,15),new CSelectOptionInfo("GMT-4:00  "+str_gmt_w0400_4,16),new CSelectOptionInfo("GMT-4:00  "+str_gmt_w0400_5,17),new CSelectOptionInfo("GMT-3:30  "+str_gmt_w0330,18),new CSelectOptionInfo("GMT-3:00  "+str_gmt_w0300_1,19),new CSelectOptionInfo("GMT-3:00  "+str_gmt_w0300_2,20),new CSelectOptionInfo("GMT-3:00  "+str_gmt_w0300_3,21),new CSelectOptionInfo("GMT-3:00  "+str_gmt_w0300_4,22),new CSelectOptionInfo("GMT-2:00  "+str_gmt_w0200,23),new CSelectOptionInfo("GMT-1:00  "+str_gmt_w0100,24),new CSelectOptionInfo("GMT  "+str_gmt,25),new CSelectOptionInfo("GMT+1:00  "+str_gmt_e0100_1,26),new CSelectOptionInfo("GMT+1:00  "+str_gmt_e0100_2,27),new CSelectOptionInfo("GMT+2:00  "+str_gmt_e0200_1,28),new CSelectOptionInfo("GMT+2:00  "+str_gmt_e0200_2,29),new CSelectOptionInfo("GMT+2:00  "+str_gmt_e0200_3,30),new CSelectOptionInfo("GMT+2:00  "+str_gmt_e0200_4,31),new CSelectOptionInfo("GMT+2:00  "+str_gmt_e0200_5,32),new CSelectOptionInfo("GMT+2:00  "+str_gmt_e0200_6,33),new CSelectOptionInfo("GMT+3:00  "+str_gmt_e0300,34),new CSelectOptionInfo("GMT+3:30  "+str_gmt_e0330,35),new CSelectOptionInfo("GMT+4:00  "+str_gmt_e0400_1,36),new CSelectOptionInfo("GMT+4:00  "+str_gmt_e0400_2,37),new CSelectOptionInfo("GMT+4:00  "+str_gmt_e0400_3,38),new CSelectOptionInfo("GMT+4:30  "+str_gmt_e0430,39),new CSelectOptionInfo("GMT+5:00  "+str_gmt_e0500,40),new CSelectOptionInfo("GMT+5:30  "+str_gmt_e0530,41),new CSelectOptionInfo("GMT+5:45  "+str_gmt_e0545,42),new CSelectOptionInfo("GMT+6:00  "+str_gmt_e0600,43),new CSelectOptionInfo("GMT+6:30  "+str_gmt_e0630,44),new CSelectOptionInfo("GMT+7:00  "+str_gmt_e0700,45),new CSelectOptionInfo("GMT+8:00  "+str_gmt_e0800_1,46),new CSelectOptionInfo("GMT+8:00  "+str_gmt_e0800_2,47),new CSelectOptionInfo("GMT+9:00  "+str_gmt_e0900,48),new CSelectOptionInfo("GMT+9:30  "+str_gmt_e0930_1,49),new CSelectOptionInfo("GMT+9:30  "+str_gmt_e0930_2,50),new CSelectOptionInfo("GMT+10:00  "+str_gmt_e1000_1,51),new CSelectOptionInfo("GMT+10:00  "+str_gmt_e1000_2,52),new CSelectOptionInfo("GMT+11:00  "+str_gmt_e1100,53),new CSelectOptionInfo("GMT+11:30  "+str_gmt_e1130,54),new CSelectOptionInfo("GMT+12:00  "+str_gmt_e1200_1,55),new CSelectOptionInfo("GMT+12:00  "+str_gmt_e1200_2,56),new CSelectOptionInfo("GMT+12:00  "+str_gmt_e1200_3,57),new CSelectOptionInfo("GMT+12:00  "+str_gmt_e1200_4,58),new CSelectOptionInfo("GMT+12:45  "+str_gmt_e1245,59),new CSelectOptionInfo("GMT+13:00  "+str_gmt_e1300,60));function OnLoadCfgBasic(){var v=document.getElementById("pc_time");var m=document.getElementById("basic_syn_ntp");var l=document.getElementById("anchor_sys_dst");var d=document.getElementById("item_ntp_server");var c=document.getElementById("table_dst");var b=document.getElementById("syn_time");var f=document.getElementById("manual_set");var D=document.getElementById("video_format");var A=document.getElementById("screen_save_time");var B=document.getElementById("time_zone");var u=document.getElementById("time_stamp_format");var g=document.getElementById("vga_resolution");var C=document.getElementById("list_time_format");var h=document.getElementById("dst_offset");var n=document.getElementById("dst_start_month");var o=document.getElementById("dst_end_month");var w=document.getElementById("dst_start_week");var t=document.getElementById("dst_end_week");var j=document.getElementById("dst_start_weekday");var s=document.getElementById("dst_end_weekday");var y=document.getElementById("device_language");var x=document.getElementById("dst_start_day_time");var k=document.getElementById("dst_end_day_time");var z=document.getElementById("dst_start_date_time");var a=document.getElementById("dst_end_date_time");var e=document.getElementById("max_client_num");var q=new DateBox("date1",true,false);v.innerHTML=q;v.dateName="date1";q.onChange=function(){g_bChange=false};if(!g_supportSyncTime){m.parentNode.style.display="none";d.parentNode.style.display="none"}if(!g_supportDst){l.style.display="none";c.style.display="none"}NtpSyn(b);SetManual(v);SynToPCTime(!f.checked);GenSelectListEx(D,g_videoFormatArray);GenSelectListEx(A,g_screenSaveTime);CreateClientMaxNumList(e);GenSelectListEx(B,g_timeZone);GenSelectListEx(u,g_timestampformat);GenSelectListEx(g,g_vgaResolution);GenSelectListEx(C,g_timeFormat);C.options[0].id="basic_12hour_label";C.options[1].id="basic_24hour_label";GenSelectListEx(y,g_languageList);ApplyXmlLang("cfg_basic.xml");y.disabled=true;var p=CreateConfigReqXml(sys_config_array);var r=WebClient.ExcuteCmd(p);if(r==""){return}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(r);g_xmlDoc.async=false;RecoverCfg();NtpSyn(b);temp_video_format=D.value;onChangeTimeZone(true);Align()}function RecoverCfg(){var a=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateValues(a,true);UpdateLiveTimeInfo(a,true)}function LoadDefaultCfgBasic(){if(GetDefaultCfg(sys_config_array)){var b=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");var c=document.getElementById("syn_time");var a=new Array();for(i=0;i<b.length;i++){if(b[i].attributes.getNamedItem("name").nodeValue!="device_language"){a.push(b[i])}}UpdateValues(a,true);UpdateLiveTimeInfo(b,true);UpdateLiveTimeInfo(b,true);NtpSyn(c);g_bChange=true}}function UpdateDaylight(j,s){var f=document.getElementsByName("dst_mode");var h=document.getElementById("dst_enable");var d=document.getElementById("dst_offset");var l=document.getElementById("dst_start_month");var t=document.getElementById("dst_start_week");var e=document.getElementById("dst_start_weekday");var m=document.getElementById("dst_end_month");var q=document.getElementById("dst_end_week");var p=document.getElementById("dst_end_weekday");var x=document.getElementById("dst_start_date_time");var w=document.getElementById("dst_start_day_time");var a=document.getElementById("dst_end_date_time");var g=document.getElementById("dst_end_day_time");for(var r=0;r<j.length;r++){if(j[r].getAttribute("name")==STR_DAY_LIGHT_INFO){if(s){var b=j[r].childNodes[0].nodeValue;var c=b.split("+");h.checked=((c[10]!="0")?true:false);for(var o=0;o<f.length;o++){if(f[o].value==c[11]){f[o].checked=true;break}}d.value=c[14];l.value=c[0];t.value=c[4];e.value=c[5];m.value=c[2];q.value=c[6];p.value=c[7];var v=new Array();v[0]=c[8]+"-"+AlignTime(parseInt(c[0],10)+1)+"-"+AlignTime(c[1]);v[1]=AlignTime(Math.floor(parseInt(c[12],10)/3600));v[2]=AlignTime(Math.floor(parseInt(c[12],10)/60)%60);v[3]=AlignTime(parseInt(c[12],10)%60);if(c[11]=="0"){DateBox.all[x.dateName].setValue(v);v.shift();DateBox.all[w.dateName].setValue(v)}else{DateBox.all[x.dateName].setValue(v);v.shift();DateBox.all[w.dateName].setValue(v)}v[0]=c[9]+"-"+AlignTime(parseInt(c[2],10)+1)+"-"+AlignTime(c[3]);v[1]=AlignTime(Math.floor(parseInt(c[13],10)/3600));v[2]=AlignTime(Math.floor(parseInt(c[13],10)/60)%60);v[3]=AlignTime(parseInt(c[13],10)%60);if(c[11]=="0"){DateBox.all[a.dateName].setValue(v);v.shift();DateBox.all[g.dateName].setValue(v)}else{DateBox.all[a.dateName].setValue(v);v.shift();DateBox.all[g.dateName].setValue(v)}}else{var b=j[r].childNodes[0].nodeValue;var c=b.split("+");c[10]=h.checked?"1":"0";for(var o=0;o<f.length;o++){if(f[o].checked){c[11]=f[o].value;break}}c[14]=d.value;var n,y;if(c[11]=="0"){n=DateBox.all[w.dateName].getValue();n=n.split(":");y=DateBox.all[g.dateName].getValue();y=y.split(":");c[0]=l.value;c[4]=t.value;c[5]=e.value;c[2]=m.value;c[6]=q.value;c[7]=p.value}else{n=DateBox.all[x.dateName].getValue();n=n.split(" ");y=DateBox.all[a.dateName].getValue();y=y.split(" ");var u=n[0].split("-");c[8]=u[0];c[0]=parseInt(u[1],10)-1;c[1]=u[2];n=n[1].split(":");u=y[0].split("-");c[9]=u[0];c[2]=parseInt(u[1],10)-1;c[3]=u[2];y=y[1].split(":")}c[12]=parseInt(n[0],10)*3600+parseInt(n[1],10)*60+parseInt(n[2],10);c[13]=parseInt(y[0],10)*3600+parseInt(y[1],10)*60+parseInt(y[2],10);j[r].childNodes[0].nodeValue=c.join("+")}return true}}return false}function UpdateLiveTimeInfo(c,d){var f=document.getElementById("has_time_stamp");for(var a=0;a<c.length;a++){if(c[a].getAttribute("name")==STR_LIVE_TIME_INFO){var e=c[a].childNodes[0].nodeValue;var b=e.split("+");if(d){if(b[2]=="0"){f.checked=false}else{f.checked=true}}else{if(f.checked){b[2]="1"}else{b[2]="0"}c[a].childNodes[0].nodeValue=b.join("+")}break}}}function OnChangeDSTMode(){var d=document.getElementsByName("dst_mode");var a=document.getElementById("table_dst");var c=document.getElementById("div_config_index");for(var b=0;b<d.length;b++){if(d[b].checked){break}}if(d[b].value=="0"){for(var e=3;e<11;e++){a.rows[e].style.display=""}for(e=11;e<13;e++){a.rows[e].style.display="none"}}else{for(var e=3;e<11;e++){a.rows[e].style.display="none"}for(e=11;e<13;e++){a.rows[e].style.display=""}}Align();EdgeCtrl(c,72)}function ConstSyslen(){var j=document.getElementById("syn_time");var b=document.getElementsByName("ntp_server");var a=document.getElementsByName("device_name");var h="";var f="";var e="";var c="";device_name_len=a[0].value.length;ntp_server_len=b[0].value.length;var d=document.getElementById("sysconfig_errortips");var k=document.getElementById("item_device_name");var g=document.getElementById("item_ntp_server");var l=true;if(device_name_len>const_device_name_len){h=k.innerHTML+cannot_more_than_tip+const_device_name_len+character;l=false}if((j.checked)&&(ntp_server_len>const_time_server_max_len)){f=g.innerHTML+cannot_more_than_tip+const_time_server_max_len+character+"<br>";l=false}if(device_name_len==0){e=k.innerHTML+" "+str_empty_tip;l=false}if((j.checked)&&(ntp_server_len==0)){c=g.innerHTML+" "+str_empty_tip;l=false}if(!l){d.style.color="red";d.innerHTML=save_error_tip+h+f+" "+e+c;g_bChange=false;return false}d.innerHTML="";d.display="none";return true}function CreateMonthList(b){var a=new Array(0,1,2,3,4,5,6,7,8,9,10,11);GenSelectList(b,calendar_month,a)}function CreateWeekList(b){var a=new Array(0,1,2,3,4,5);GenSelectList(b,str_week_index,a)}function CreateWeekdayList(b){var a=new Array(0,1,2,3,4,5,6);GenSelectList(b,week_full_spell,a)}function CreateClientMaxNumList(c){var b=new Array();for(var a=1;a<=const_max_client_count;a++){b[a-1]=new CSelectOptionInfo(a,a)}GenSelectListEx(c,b)}function HasTimeStamp(b){var c=document.getElementById("time_stamp_pos");var a=document.getElementById("time_stamp_format");c[0].disabled=!b.checked;a[0].disabled=!b.checked}function LiveAudioEnable(b){var a=document.getElementsByName("audio_channel");a[0].disabled=!b.checked}function DwellEnabled(b){var a=document.getElementsByName("dwell_time");a[0].disabled=!b.checked}function NtpSyn(c){var b=document.getElementsByName("ntp_server");var a=document.getElementsByName("sync_time_now");b[0].disabled=!c.checked;a[0].disabled=!c.checked;if(c.checked){a[0].style.color=btn_text_normal_color}else{a[0].style.color=btn_text_disabled_color}if(c.checked){b[0].style.color="#000000"}else{b[0].style.color="#c0c0c0"}}function SetManual(g){var e=document.getElementById("pc_time");var f=document.getElementById("manual_set");var d=document.getElementsByName("ntp_server");var b=e.getElementsByTagName("input");for(var c=0;c<b.length;c++){b[c].disabled=!g.checked}f.disabled=false}var g_timeCount;function SynToPCTime(a){var d=document.getElementById("pc_time");if(a){var b=new Date();var c=new Array();try{c[0]=b.getFullYear()+"-"+AlignTime(b.getMonth()+1)+"-"+AlignTime(b.getDate());c[1]=AlignTime(b.getHours());c[2]=AlignTime(b.getMinutes());c[3]=AlignTime(b.getSeconds());DateBox.all[d.dateName].setValue(c);g_timeCount=setTimeout("SynToPCTime("+a+")",1000)}catch(f){clearTimeout(g_timeCount)}}else{clearTimeout(g_timeCount)}}function ChangeTime(){var c=document.getElementById("pc_time");var a=DateBox.all[c.dateName].getValue();var b=a.split("-")[0];var h=parseInt(b,10);if(h<2008){return}if(!confirm(str_change_time_tip)){return}var g="<request>\r\n";g+='<command name="'+STR_CHANGE_TIME+'">\r\n';g+="<"+STR_NEW_TIME+">";g+=DateBox.all[c.dateName].getValue();g+="</"+STR_NEW_TIME+">\r\n";g+="</command>\r\n";g+="</request>\r\n";var e=WebClient.ExcuteCmd(g);if(e!=""){var d;d=FormatToXmlDOM(e);d.async=false;var f=d.documentElement.getElementsByTagName("command");if(f.length>0){if(f[0].getAttribute("name")==STR_CHANGE_TIME_SUCC){window.alert(str_sync_time_succ_tip);return}}delete d}window.alert(str_sync_time_fail_tip)}var g_syncTimeNowTimer=0;function SyncTimeNow(){if(!confirm(str_change_time_tip)){return}StartWaitTip(str_sync_time_wait_tip);g_syncTimeNowTimer=setTimeout("SyncTimeNowProc()",100)}function SyncTimeNowProc(){var a=document.getElementsByName("ntp_server");var e="<request>\r\n";e+='<command name="'+STR_SYNC_TIME_NOW+'">\r\n';e+="<"+STR_NTP_SERVER+">"+a[0].value+"</"+STR_NTP_SERVER+">\r\n";e+="</command>\r\n";e+="</request>\r\n";var c=WebClient.ExcuteCmd(e);if(c!=""){var b;b=FormatToXmlDOM(c);b.async=false;var d=b.documentElement.getElementsByTagName("command");if(d.length>0){if(d[0].getAttribute("name")==STR_SYNC_TIME_SUCC){StopWaitTip();window.alert(str_sync_time_succ_tip);clearTimeout(g_syncTimeNowTimer);return}}delete b}StopWaitTip();window.alert(str_sync_time_fail_tip);clearTimeout(g_syncTimeNowTimer)}function onChangeTimeZone(a){var d=document.getElementById("dst_enable");var b=document.getElementById("time_zone");for(var c=0;c<surportDSTArr.length;c++){if(surportDSTArr[c].id==b.value){if(surportDSTArr[c].value){if(!a){d.checked=true}d.disabled=false}else{d.disabled=true;d.checked=false}break}}};
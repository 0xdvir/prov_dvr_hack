function AlignTime(a){if(a.toString().length<2){return"0"+a}return a}function DateToString(a){return a.getFullYear()+"-"+AlignTime(a.getMonth()+1)+"-"+AlignTime(a.getDate())+" "+AlignTime(a.getHours())+":"+AlignTime(a.getMinutes())+":"+AlignTime(a.getSeconds())}function DateBox(c,a,b){this.id=c;this.bPop=a;this.bTimeOnly=b;this.onChange=function(){g_bChange=true};this.onEnterKey=new Function();DateBox.all[c]=this}DateBox.all={};DateBox.prototype={toString:function(){var a='<span  id="'+this.id+'" style = "text-align:center;height:23px; background-color:#dcdcdc; padding:0;" >';if(!this.bTimeOnly){a+='<div id="'+this.id+'_calDiv" style="position:absolute; z-index:1"></div>                        <input class = "calendar" id="'+this.id+'_1" type="text" value = "2004-01-01" readonly = "readonly" style = " width:107px; margin:0;text-align:center; border-width:1px 0 1px 1px;border-style:solid;border-color:#7F9DB9;cursor: pointer;" onclick = "DateBox.evt.onclick(this,event)"/>';a+='<input id="'+this.id+'_2"onkeypress="DateBox.evt.keypress(this,event)" style="border-width:1px 0 1px 0; border-style:solid;border-color:#7F9DB9;text-align:center; width:25px;" name = "hour" class = "hour" onfocus="DateBox.evt.focus(this,event)" onchange = "DateBox.evt.change(this,event)" type="text" maxlength=2                            value="00"/>'}else{a+='<div id="'+this.id+'_calDiv" style="position:absolute; z-index:1"></div>                        <input class = "calendar" id="'+this.id+'_1" type="text" value = "2004-01-01" readonly = "readonly" style = "display:none;width:107px; margin:0;text-align:center; border-width:1px 0 1px 1px;border-style:solid;border-color:#7F9DB9;cursor: pointer;" onclick = "DateBox.evt.onclick(this,event)"/>';a+='<input id="'+this.id+'_2"onkeypress="DateBox.evt.keypress(this,event)" style="border-width:1px 0 1px 1px; border-style:solid;border-color:#7F9DB9;text-align:center; width:28px;" name = "hour" class = "hour" onfocus="DateBox.evt.focus(this,event)" onchange = "DateBox.evt.change(this,event)" type="text" maxlength=2                            value="00"/>'}a+='<input type="text" value = ":"style = "border-width:1px 0 1px 0; border-style:solid;width:8px;border-color:#7F9DB9;" disabled = "disabled" class = "separator"         /><input id="'+this.id+'_3"onkeypress="DateBox.evt.keypress(this,event)" style="border-width:1px 0 1px 0; border-style:solid;border-color:#7F9DB9;text-align:center; width:25px;" name = "minute" class = "minute" onfocus="DateBox.evt.focus(this,event)" onchange = "DateBox.evt.change(this,event)" type="text" maxlength=2         value="00"/><input type="text" value = ":" style = "border-width:1px 0 1px 0; border-style:solid;border-color:#7F9DB9;width:8px;" disabled = "disabled" class = "separator"         /><input id="'+this.id+'_4"onkeypress="DateBox.evt.keypress(this,event)" style="border-width:1px 1px 1px 0; border-style:solid;border-color:#7F9DB9;text-align:center; width:25px;" name = "second" class = "second" onfocus="DateBox.evt.focus(this,event)" onchange = "DateBox.evt.change(this,event)" type="text" maxlength=2         value="00"/></span>';return a},getValue:function(){var a="";if(!this.bTimeOnly){a=document.getElementById(this.id+"_1").value+" "}a+=document.getElementById(this.id+"_2").value+":";a+=document.getElementById(this.id+"_3").value+":";a+=document.getElementById(this.id+"_4").value;return a},setValue:function(a){if(a==null){return}var b=0;if(!this.bTimeOnly){document.getElementById(this.id+"_1").value=a[0];b=1}document.getElementById(this.id+"_2").value=a[b+0];document.getElementById(this.id+"_3").value=a[b+1];document.getElementById(this.id+"_4").value=a[b+2]}};DateBox.evt={onclick:function(c,b){var d=c.id.replace(/_1/,"");var a=document.getElementById(d+"_calDiv");if(DateBox.all[d].bPop){PopCalendar(c,a,document.getElementById(d+"_2"))}},focus:function(b,a){b.select()},change:function(b,a){var c=b.id.replace(/_\d/,"");if(b.value.length==1){b.value="0"+b.value}if(b.value.length==0){b.value="00"}DateBox.all[c].onChange()},keypress:function(g,a){var e=g.parentNode;var b=e.getElementsByTagName("input");var d=a.charCode||a.keyCode;var i=DateBox.evt.getSelection(g);var f=g.value;var h=String.fromCharCode(d);if(d>=48&&d<=57){f=""+f.substring(0,i.start)+h+f.substring(i.end,f.length);if(g.name=="hour"){if(parseInt(f,10)<=23){if(f.length==2){setTimeout(b[3].id+".focus();"+b[3].id+".select();",200)}return true}else{if(a.preventDefault){a.preventDefault()}a.returnValue=false;return false}}if(g.name=="minute"||g.name=="second"){if(parseInt(f,10)<=59){if(f.length==2){setTimeout(b[5].id+".focus();"+b[5].id+".select();",200)}return true}else{if(a.preventDefault){a.preventDefault()}a.returnValue=false;return false}}}else{if(a.preventDefault){a.preventDefault()}a.returnValue=false}},getSelection:function(e){var a=this;if(e.createTextRange){var b=document.selection.createRange().duplicate();b.moveStart("character",-e.value.length);var d=b.text.length;var b=document.selection.createRange().duplicate();b.moveEnd("character",e.value.length);var c=e.value.lastIndexOf(b.text);if(b.text==""){c=e.value.length}return{start:c,end:d}}else{return{start:e.selectionStart,end:e.selectionEnd}}}};function DateTicker(a){this.id=a;DateTicker.all[a]=this}DateTicker.all={};DateTicker.prototype={toString:function(){var a='<span  id="'+this.id+'" style = "text-align:center;height:20px;line-height:20px; padding:0;" >';a+='<div id="'+this.id+'_calDiv" style="position:absolute; z-index:1"></div>                        <input id="'+this.id+'_1" type="text" value = "2004-01-01" readonly = "readonly" style = "width:100px; margin:0;text-align:center;border:solid 1px #7F9DB9; cursor:pointer;" onclick = "DateTicker.evt.onclick(this,event)"/>                         <img src="res/dateImageButton.jpg" style="border:0px; margin:0px;vertical-align:middle;cursor: pointer;" onclick="var '+this.id+"_1 = document.getElementById('"+this.id+"_1');DateTicker.evt.onclick("+this.id+'_1,event)"/>                         </span>';return a},getValue:function(){return document.getElementById(this.id+"_1").value},setValue:function(a){if(a==null){return}document.getElementById(this.id+"_1").value=a}};DateTicker.evt={onclick:function(c,b){var d=c.id.replace(/_1/,"");var a=document.getElementById(d+"_calDiv");PopCalendar(c,a,null)}};
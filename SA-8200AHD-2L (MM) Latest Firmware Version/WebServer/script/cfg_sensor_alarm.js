var cfg_sensor_header=new Array(str_no,str_enabel,str_sensorname,str_type,str_holdtimes,str_trigger);if(g_US02){cfg_sensor_header=new Array(str_no,str_enabel,str_sensorname,str_type,str_trigger)}var cfg_sensor_ptz_header=new Array(str_ch,str_type,str_no);function OnLoadCfgSensorAlarm(){var r=document.getElementById("id_sensor_alarm");var s=document.getElementById("all_sensor_in_type");var m=document.getElementById("all_sensor_in_hold_time");var h=document.getElementById("sensor_trigger_out");var l=document.getElementById("sensor_trigger_record");var f=document.getElementById("id_sensor_ptz");var t=document.getElementById("id_sensor_ftp");var e=document.getElementById("sensor_all_cfg");var n=document.getElementById("id_sensor_all");var g=document.getElementById("all_sensor_in_enable");var d=document.getElementById("sensor_snap");var c=document.getElementById("sensor_snap_label");var q=document.getElementById("sensor_trigger_ptz_label");var a=document.getElementById("sensor_trigger_ftp_label");ApplyXmlLang("cfg_sensor_alarm.xml");if(g_net_ch_num>0){GetNetChannelEncodeInfo(0)}if(!g_US02){CreateListSensor(r,6,cfg_sensor_header,g_sensorList.length+g_net_ch_num)}else{var m=document.getElementById("all_sensor_in_hold_time");var s=document.getElementById("all_sensor_in_type");var b=document.getElementById("sensor_trigger_button");s.style.width="115px";b.parentNode.style.width="319px";m.parentNode.style.display="none";CreateListSensor(r,5,cfg_sensor_header,g_sensorList.length+g_net_ch_num)}GenSelectListEx(s,g_sensorInType);if(!g_US02){GenSelectListEx(m,g_alarmOutHoldTime)}GenCheckGroup(h,true,g_alarmoutList,STR_SENSOR_IN_TO_ALARM_OUT+"_ctrl",4,Btrigger);if(g_alarmoutList.length>1){h.className+=" user_gen_table"}else{h.style.border="0";if(h.rows[0]){h.rows[0].cells[0].style.border="0"}}if(g_supportFunctions.IsNotSupportAlarm()){document.getElementById("sensor_alarmout_label").style.display="none";document.getElementById("sensor_alarmout_label").parentNode.style.display="none";h.style.display="none";h.parentNode.parentNode.style.display="none"}GenCheckGroup(l,true,g_TotalChannelList,STR_SENSOR_IN_TO_RECORD+"_ctrl",4,Btrigger);GenCheckGroup(d,true,g_TotalChannelList,STR_SENSOR_IN_TO_SNAP+"_ctrl",4,Btrigger);GenCheckGroup(t,true,g_channelList,STR_SENSOR_IN_TO_FTP+"_ctrl",4,Btrigger);SensorTriggerPTZ(f,3,cfg_sensor_ptz_header,g_local_ch_num+g_net_ch_num);if(g_local_ch_num==0&&!g_supportFunctions.IsSupportSetIpPtzConfig()){q.parentNode.style.display="none";var f=document.getElementById("id_sensor_ptz");f.parentNode.parentNode.style.display="none";t.parentNode.parentNode.style.display="none"}if(!g_supportFunctions.IsSupportPTZ()){q.parentNode.style.display="none";var f=document.getElementById("id_sensor_ptz");f.parentNode.parentNode.style.display="none"}if(!g_supportFunctions.IsSupportFTP()){a.parentNode.style.display="none";var t=document.getElementById("id_sensor_ftp");t.parentNode.parentNode.style.display="none"}var o=CreateConfigReqXml(sensor_config_array);var p=WebClient.ExcuteCmd(o);if(p==""){return false}if(g_xmlDoc!=null){delete g_xmlDoc;g_xmlDoc=null}g_xmlDoc=FormatToXmlDOM(p);g_xmlDoc.async=false;var j=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateValues(j,true);cfgCopy2All(e,r,n);AlarmGetCruiseList(j);g.checked=true;m.value=10;Align()}function LoadDefaultCfgSensorAlarm(){if(GetDefaultCfg(sensor_config_array)){onSensorPTZCancel();var e=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateValues(e,true);var c=document.getElementById("sensor_all_cfg");var a=document.getElementById("id_sensor_alarm");var b=document.getElementById("id_sensor_all");cfgCopy2All(c,a,b);var d=/msie/i.test(navigator.userAgent);for(i=0;i<e.length;i++){if(e[i].parentNode&&STR_PTZ_CRUISE_INFO==e[i].attributes.getNamedItem("name").nodeValue){e[i].parentNode.removeChild(e[i]);i=0}}g_bChange=true;bTrigger=true}}function CreateListSensor(j,a,c,m){var e=/msie/i.test(navigator.userAgent);var l=j.outerHTML.toLowerCase();var d=l.indexOf("</tbody>");l=l.substr(0,d);var b=new Array(50,50,155,85,115,224);l+="<tr class = 'table_head_bgcolor'>";for(var g=0;g<a;g++){l+='<td style = "text-align:center">'+c[g]+"</td>"}l+="</tr>";for(var g=1;g<m+1;g++){if(e){l+="<tr>";l+='<td style = "text-align:center;width:50px;">'+g+"</td>";l+='<td><input type = "checkbox" style = "width:50px" name = "sensor_in_enable" onchange = "g_bChange = true;"/></td>';l+='<td><input type = "text" name = "sensor_in_name" style = "color:#000000;width:155px;" onkeydown = "return LenCheck(this,event,const_sensor_name_max_len);" onkeyup = "return KeyupCheck(this,const_sensor_name_max_len);" onchange = "g_bChange = true;"></td>';if(!g_US02){l+='<td><select style = "width:85px" onchange = "g_bChange = true;" name = "sensor_in_type"></select></td>';l+='<td><select style = "width:115px" onchange = "g_bChange = true;" name = "sensor_in_hold_time"></select></td>';l+='<td align = "center" style = "width:224px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+set_button+' onclick = "OnDisOrHidSensor('+(g-1)+')"/></td>'}else{l+='<td><select style = "width:115px" onchange = "g_bChange = true;" name = "sensor_in_type"></select></td>';l+='<td align = "center" style = "width:319px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+set_button+' onclick = "OnDisOrHidSensor('+(g-1)+')"/></td>'}l+="</tr>"}else{l+="<tr>";l+='<td style = "text-align:center;width:50px;">'+g+"</td>";l+='<td style = "text-align:center;width:50px;"><input type = "checkbox" style = "width:30px" name = "sensor_in_enable" onchange = "g_bChange = true;"/></td>';l+='<td><input type = "text" name = "sensor_in_name" style = "color:#000000;width:155px;" onkeydown = "return LenCheck(this,event,const_sensor_name_max_len);" onkeyup = "return KeyupCheck(this,const_sensor_name_max_len);" onchange = "g_bChange = true;"></td>';if(!g_US02){l+='<td><select style = "width:85px" onchange = "g_bChange = true;" name = "sensor_in_type"></select></td>';l+='<td><select style = "width:115px" onchange = "g_bChange = true;" name = "sensor_in_hold_time"></select></td>';l+='<td align = "center" style = "width:224px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+set_button+' onclick = "OnDisOrHidSensor('+(g-1)+')"/></td>'}else{l+='<td><select style = "width:115px" onchange = "g_bChange = true;" name = "sensor_in_type"></select></td>';l+='<td align = "center" style = "width:319px"><input style = "width:145px; height:25px; border:0; background:url(res/145x25_btn.jpg);cursor:pointer;" type = "button" value = '+set_button+' onclick = "OnDisOrHidSensor('+(g-1)+')"/></td>'}l+="</tr>"}}l+="</tbody></table>";if(e){var h=j.parentElement}else{var h=j.parentNode}h.innerHTML=l;for(var g=1;g<m+1;g++){if(!g_US02){GenSelectListEx(document.getElementsByName("sensor_in_hold_time")[g-1],g_alarmOutHoldTime)}GenSelectListEx(document.getElementsByName("sensor_in_type")[g-1],g_sensorInType);if(g>g_sensorList.length&&g<=g_sensorList.length+g_net_ch_num){if(g_majorNetChannelEncodeProperty[g-1-g_sensorList.length].online!=1){var f=document.getElementsByName("sensor_in_type")[g-1].parentNode;f.parentNode.style.display="none";f.parentNode.style.border=0}}}j=h.childNodes[0]}function SensorTriggerPTZ(g,a,b,j){var d=/msie/i.test(navigator.userAgent);var h=g.outerHTML.toLowerCase();var c=h.indexOf("</tbody>");h=h.substr(0,c);h+="<tr class = 'table_head_bgcolor'>";for(var e=0;e<a;e++){h+='<td style = "text-align:center">'+b[e]+"</td>"}h+="</tr>";for(var e=1;e<j+1;e++){h+="<tr>";h+='<td style = "width:180px;text-align:center">'+e+"</td>";h+='<td><select style = "width:260px" name = "ptz_type" onchange = "onMotionChangePtzType(this,'+e+');bTrigger = true"></select></td>';h+='<td><select style = "width:260px" name = "ptz_number"onchange = "bTrigger = true;"></select></td>';h+="</tr>"}h+="</tbody></table>";if(d){var f=g.parentElement}else{var f=g.parentNode}f.innerHTML=h;g_motionPTZTypeCopy=g_motionPTZType.slice(0);g_motionPTZTypeCopy.splice(g_motionPTZType.length-1,1);for(var e=1;e<j+1;e++){if(e>g_local_ch_num){GenSelectListEx(document.getElementsByName("ptz_type")[e-1],g_motionPTZTypeCopy)}else{GenSelectListEx(document.getElementsByName("ptz_type")[e-1],g_motionPTZType)}if(document.getElementsByName("ptz_type")[e-1].value==2){GenSelectListEx(document.getElementsByName("ptz_number")[e-1],g_cruiseList[e-1])}else{GenSelectListEx(document.getElementsByName("ptz_number")[e-1],g_presetList)}}g=f.childNodes[0]}function OnDisOrHidSensor(g){var f=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");var a=document.getElementById("div_config_index");UpdateBooleanTrigger(f,STR_SENSER_IN_BUZZ,STR_SENSER_IN_BUZZ+"_ctrl",false);UpdateBooleanTrigger(f,STR_SENSOR_IN_TO_EMAIL,STR_SENSOR_IN_TO_EMAIL+"_ctrl",false);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_ALARM_OUT,STR_SENSOR_IN_TO_ALARM_OUT+"_ctrl",false);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_RECORD,STR_SENSOR_IN_TO_RECORD+"_ctrl",false);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_SNAP,STR_SENSOR_IN_TO_SNAP+"_ctrl",false);UpdateBigView(f,STR_SENSOR_IN_TO_BIGVIEW,STR_SENSOR_IN_TO_BIGVIEW+"_ctrl",false);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_FTP,STR_SENSOR_IN_TO_FTP+"_ctrl",false);UpdateAlarmToPtz(f,false,g_curchannel_sensor);var h=document.getElementById("div_sensor_trigger");var c=document.getElementById("id_cp_sensor");var n=document.getElementById("sensor_index_num");var d=document.getElementById("sensor_trigger_out");var m=document.getElementById("sensor_trigger_record");var e=document.getElementById("sensor_snap");var o=document.getElementById("id_sensor_ftp");var b=document.getElementById("cp_config_sensor");var l=document.getElementById("sensor_in_to_bigview_ctrl");h.style.display="";c.style.display="";n.innerHTML="<b>"+channel_string+(g+1)+"</b>";g_curchannel_sensor=g;for(i=0;i<g_local_ch_num+g_net_ch_num;i++){document.getElementsByName("ptz_type")[i].disabled=false;document.getElementsByName("ptz_number")[i].disabled=false}for(k=0;k<g_bUpdataChannel.length;k++){if(k!=g){g_bUpdataChannel[k]=0}else{g_bUpdataChannel[k]=1}}GenSelectListEx(l,g_bigViewList);var f=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateBooleanTrigger(f,STR_SENSER_IN_BUZZ,STR_SENSER_IN_BUZZ+"_ctrl",true);UpdateBooleanTrigger(f,STR_SENSOR_IN_TO_EMAIL,STR_SENSOR_IN_TO_EMAIL+"_ctrl",true);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_ALARM_OUT,STR_SENSOR_IN_TO_ALARM_OUT+"_ctrl",true);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_SNAP,STR_SENSOR_IN_TO_SNAP+"_ctrl",true);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_RECORD,STR_SENSOR_IN_TO_RECORD+"_ctrl",true);UpdateBigView(f,STR_SENSOR_IN_TO_BIGVIEW,STR_SENSOR_IN_TO_BIGVIEW+"_ctrl",true);UpdateAlarmTrigger(f,STR_SENSOR_IN_TO_FTP,STR_SENSOR_IN_TO_FTP+"_ctrl",true);UpdateAlarmToPtz(f,true,g_curchannel_sensor);var j=new Array();for(i=0;i<g_sensorList.length;i++){j[i]=g_sensorList[i]}for(i=g_sensorList.length;i<g_net_ch_num+g_sensorList.length;i++){j[i]=new CSelectOptionInfo(sensor_string+(i+1),i)}GenCpList(b,g,j);UpdateCheckItems(d);UpdateCheckItems(m);UpdateCheckItems(e);UpdateCheckItems(o);Align();EdgeCtrl(a,72);location.href="#sensor_all_label"}function onSensorPTZSave(){var b=document.getElementById("div_config_index");var a=document.getElementById("div_sensor_trigger");if(!bTrigger){window.alert(cfg_nochange_tip)}else{var c=g_xmlDoc.documentElement.getElementsByTagName("command")[0].getElementsByTagName("parameter");UpdateBooleanTrigger(c,STR_SENSER_IN_BUZZ,STR_SENSER_IN_BUZZ+"_ctrl",false);UpdateBooleanTrigger(c,STR_SENSOR_IN_TO_EMAIL,STR_SENSOR_IN_TO_EMAIL+"_ctrl",false);UpdateAlarmTrigger(c,STR_SENSOR_IN_TO_ALARM_OUT,STR_SENSOR_IN_TO_ALARM_OUT+"_ctrl",false);UpdateAlarmTrigger(c,STR_SENSOR_IN_TO_RECORD,STR_SENSOR_IN_TO_RECORD+"_ctrl",false);UpdateAlarmTrigger(c,STR_SENSOR_IN_TO_SNAP,STR_SENSOR_IN_TO_SNAP+"_ctrl",false);UpdateAlarmTrigger(c,STR_SENSOR_IN_TO_FTP,STR_SENSOR_IN_TO_FTP+"_ctrl",false);UpdateBigView(c,STR_SENSOR_IN_TO_BIGVIEW,STR_SENSOR_IN_TO_BIGVIEW+"_ctrl",false);UpdateAlarmToPtz(c,false,g_curchannel_sensor);a.style.display="none";Align();EdgeCtrl(b,72)}for(k=0;k<g_bUpdataChannel.length;k++){g_bUpdataChannel[k]=0}}function onSensorPTZCancel(){var b=document.getElementById("div_config_index");var a=document.getElementById("div_sensor_trigger");a.style.display="none";Align();EdgeCtrl(b,72);for(k=0;k<g_bUpdataChannel.length;k++){g_bUpdataChannel[k]=0}}function disAllsensor(){var f=document.getElementById("div_sensor_trigger");var b=document.getElementById("id_cp_sensor");var l=document.getElementById("sensor_index_num");var d=document.getElementById("sensor_trigger_out");var j=document.getElementById("sensor_trigger_record");var e=document.getElementById("sensor_snap");var m=document.getElementById("id_sensor_ftp");var a=document.getElementById("div_config_index");var g=document.getElementById("sensor_in_to_bigview_ctrl");f.style.display="";b.style.display="none";l.innerHTML="<b>"+str_all_channel+"</b>";UpdateCheckItems(d);UpdateCheckItems(j);UpdateCheckItems(e);UpdateCheckItems(m);var h=document.getElementsByName("ptz_type");for(var c=0;c<(g_local_ch_num+g_net_ch_num);c++){onMotionChangePtzType(h[c],c+1)}GenSelectListEx(g,g_bigViewList);Align();EdgeCtrl(a,72);location.href="#sensor_all_label"}function ConstSensorLen(){var e="";var d="";var b=true;var a=document.getElementsByName("sensor_in_name");var c=document.getElementById("sensorconfig_errortips");for(i=0;i<a.length;i++){sensor_name_len=a[i].value.length;if(sensor_name_len>const_sensor_name_max_len){e=str_sensor_name_len+cannot_more_than_tip+const_sensor_name_max_len+character;b=false}if(sensor_name_len==0){d=str_sensor_name_len+str_empty_tip;b=false}}if(!b){c.style.color="red";c.innerHTML=save_error_tip+e+d;bTrigger=false;g_bChange=false;return false}c.innerHTML="";c.display="none";return true};